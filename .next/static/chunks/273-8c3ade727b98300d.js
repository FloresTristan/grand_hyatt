"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{6217:(e,t,l)=>{l.d(t,{A:()=>s});var n=l(5155),r=l(2115),a=l(6766),i=l(6643),o=l(335);function s(e){var t,l,s;let{open:c,onClose:u,events:d,container:h="contained",initialIndex:m=0}=e,[x,p]=(0,r.useState)(()=>{var e;return Math.min(Math.max(m,0),Math.max(0,(null!=(e=null==d?void 0:d.length)?e:1)-1))});(0,r.useEffect)(()=>{var e;p(Math.min(Math.max(m,0),Math.max(0,(null!=(e=null==d?void 0:d.length)?e:1)-1)))},[d,m,c]),console.log({index:x});let f=(0,r.useRef)([]);(0,r.useEffect)(()=>{let e=f.current[x];e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[x]),(0,r.useEffect)(()=>{var e;if(c&&!((null!=(e=null==d?void 0:d.length)?e:0)<1))return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t);function t(e){"Escape"===e.key&&u(),"ArrowLeft"===e.key&&p(e=>(e-1+d.length)%d.length),"ArrowRight"===e.key&&p(e=>(e+1)%d.length)}},[c,d,u]);let g=(null!=(t=null==d?void 0:d.length)?t:0)>0;if(!c||!g)return null;let v="contained"===h?"absolute":"fixed",w=d[x];return console.log({current:w}),(0,n.jsxs)("div",{className:"".concat(v," inset-0 ").concat("contained"===h?"z-10":"z-[9999]"," flex items-center justify-center"),role:"dialog","aria-modal":"true",children:[(0,n.jsx)("div",{className:"".concat(v," inset-0 bg-black/60 backdrop-blur-[1px]"),onClick:u}),(0,n.jsxs)("div",{className:"relative z-10 w-full max-w-[290px] md:max-w-[560px] rounded-2xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:u,"aria-label":"Close",className:"absolute -right-3 -top-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg cursor-pointer ring-4 ring-white",children:"\xd7"}),d.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{"aria-label":"Previous",onClick:()=>p(e=>(e-1+d.length)%d.length),className:"absolute left-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"‹"}),(0,n.jsx)("button",{"aria-label":"Next",onClick:()=>p(e=>(e+1)%d.length),className:"absolute right-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"›"})]}),(0,n.jsxs)("div",{className:"px-5 pb-5 pt-6",children:[(null==w?void 0:w.imageUrl)&&(0,n.jsx)("div",{className:"relative mx-auto mb-4 h-32 w-full overflow-hidden rounded-xl sm:h-36",children:(0,n.jsx)(a.default,{src:w.imageUrl,alt:w.title||"",fill:!0,unoptimized:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, 560px",priority:!0})}),(0,n.jsx)("h2",{className:"text-center text-neutral-600 text-3xl font-semibold tracking-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==w?void 0:w.title}),!!(null==w?void 0:w.subheading)&&(0,n.jsx)("p",{className:"mt-1 text-center text-sm text-neutral-600 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==w?void 0:w.subheading}),((null==w?void 0:w.dateRange)||(null==w?void 0:w.timeText))&&(0,n.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm text-neutral-700",children:[(null==w?void 0:w.dateRange)&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,n.jsx)(i.A,{sx:{fontSize:20}}),null==w?void 0:w.dateRange]}),(null==w?void 0:w.timeText)&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,n.jsx)(o.A,{sx:{fontSize:20}}),null==w?void 0:w.timeText]})]}),!!(null==w?void 0:w.description)&&(0,n.jsx)("div",{className:"mt-4 max-h-56 overflow-y-auto",children:(0,n.jsx)("p",{className:"text-sm leading-relaxed text-neutral-800 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==w?void 0:w.description})}),((null==w?void 0:w.ctaLabel)||(null==w?void 0:w.ctaHref))&&(0,n.jsx)("div",{className:"mt-6 flex justify-center",children:(null==w?void 0:w.ctaHref)?(0,n.jsx)("a",{href:null==w?void 0:w.ctaHref,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(l=null==w?void 0:w.ctaLabel)?l:"Learn more"}):(0,n.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(s=null==w?void 0:w.ctaLabel)?s:"Learn more"})}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("div",{className:"items-center w-[25%] md:w-[15%]",children:d.length>1&&(0,n.jsx)("div",{className:"mt-4 w-full max-w-md mx-auto  overflow-x-scroll custom-scrollbar",children:(0,n.jsx)("div",{className:"flex items-center gap-3 px-2",children:d.map((e,t)=>{let l=t===x;return(0,n.jsx)("button",{ref:e=>{f.current[t]=e},"aria-label":"Go to slide ".concat(t+1),"aria-current":l?"true":void 0,onClick:()=>p(t),className:"\n                            h-2 md:h-3 w-2 md:w-3 rounded-full transition-all duration-300\n                            flex-shrink-0 focus:outline-none\n                            ".concat(l?"bg-neutral-900":"border-neutral-300 bg-neutral-200 hover:bg-neutral-400","\n                          ")},t)})})})})})]})]})]})}},7217:(e,t,l)=>{l.d(t,{$h:()=>d,Ah:()=>i,E2:()=>a,EY:()=>s,Hz:()=>r,IH:()=>h,QP:()=>c,Rs:()=>p,dT:()=>f,oS:()=>g,ox:()=>o,sH:()=>x,tX:()=>m,zM:()=>w});var n=l(5155);l(2115);let r=e=>{let{imageUrl:t,onFileSelect:l,onDrop:r,onDragOver:a,onPickClick:i,inputRef:o}=e;return(0,n.jsxs)("div",{className:"border border-dashed rounded-xl h-32 flex items-center justify-center relative hover:border-white/60 transition-colors cursor-pointer group",onClick:i,onDrop:r,onDragOver:a,title:"Click, drag & drop, or paste an image",children:[t?(0,n.jsx)("img",{src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):(0,n.jsxs)("div",{className:"text-center text-white/70 px-4",children:[(0,n.jsx)("div",{className:"text-sm",children:"Image Upload"}),(0,n.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Click, drag & drop, or paste"})]}),(0,n.jsx)("div",{className:"absolute inset-0 rounded-xl ring-0 group-hover:ring-2 ring-white/10 pointer-events-none"}),(0,n.jsx)("input",{ref:o,type:"file",accept:"image/*",onChange:l,className:"hidden"})]})};async function a(e){let{setEvents:t,setLoadingEvents:l}=e;l(!0);try{var n,r;let e=await fetch("/api/events",{cache:"no-store"}),l=await e.json();if(console.log(l,"fetched data for homepage"),console.log("ANON key fingerprint:",(n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===n)?void 0:n.slice(0,6),"…",(r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===r)?void 0:r.slice(-6)),!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load events");let a=(l.items||[]).sort((e,t)=>{var l,n;return(null!=(l=e.order)?l:0)-(null!=(n=t.order)?n:0)});t(a)}catch(e){console.error(e)}finally{l(!1)}}async function i(e){let{setEvents:t,setLoadingEvents:l}=e;l(!0);try{let e=await fetch("/api/admin/events",{cache:"no-store"}),l=await e.json();if(!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load events");let n=(l.items||[]).sort((e,t)=>{var l,n;return(null!=(l=e.order)?l:0)-(null!=(n=t.order)?n:0)});t(n)}catch(e){console.error(e)}finally{l(!1)}}function o(e){let{label:t,value:l,onChange:r,placeholder:a}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("input",{value:l,onChange:e=>r(e.target.value),placeholder:a,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function s(e){let{label:t,value:l,onChange:r,placeholder:a,rows:i=5}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("textarea",{value:l,maxLength:500,onChange:e=>r(e.target.value),placeholder:a,rows:i,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 resize-y"})]})}function c(e){let{label:t,value:l,onChange:r,min:a,max:i}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"date",value:l,min:a,max:i,onChange:e=>r(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}let u=["all","live","scheduled","expired","hidden"],d=(e,t,l)=>{if(0===t)return l(!1),null!=e?e:[];{var n;console.log({tabIdx:t}),l(!0);let r=null!=(n=u[t])?n:"live";return console.log({wanted:r}),(null!=e?e:[]).filter(e=>(e=>{if(null==e?void 0:e.computed_status)return e.computed_status;if(!(null==e?void 0:e.published))return"hidden";let t=Date.now(),l=(null==e?void 0:e.publish_at)?new Date(e.publish_at).getTime():null,n=(null==e?void 0:e.unpublish_at)?new Date(e.unpublish_at).getTime():null;return l&&l>t?"scheduled":n&&n<=t?"expired":"live"})(e)===r)}};function h(e){let{publishModal:t,forceOpen:l,startDate:n,endDate:r}=e;if(!t)return!1;if(l)return!0;let a=new Date,i=n?function(e){let t=new Date(e);return t.setHours(0,0,0,0),t}(new Date(n)):new Date(0),o=r?function(e){let t=new Date(e);return t.setHours(23,59,59,999),t}(new Date(r)):new Date(864e13);return a>=i&&a<=o}function m(e,t){if(!e&&!t)return"";if(e&&!t)return v(e);if(!e&&t)return v(t);let l=new Date(e),n=new Date(t);if(isNaN(l.getTime())||isNaN(n.getTime()))return"";if(l.getFullYear()===n.getFullYear()&&l.getMonth()===n.getMonth()){let e=l.toLocaleString(void 0,{month:"short"});return"".concat(e," ").concat(l.getDate(),"–").concat(n.getDate(),", ").concat(l.getFullYear())}return"".concat(v(e)," – ").concat(v(t))}function x(e,t){let l=p(e),n=p(t);return l||n?l&&!n?l:!l&&n?n:"".concat(l," – ").concat(n):""}function p(e,t){var l;let n=function(e){var t,l;if(!(null==e?void 0:e.trim()))return null;let n=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2})(?:\.\d+)?)?$/.exec(e.trim());if(!n)return null;let r=Number(n[1]),a=Number(null!=(t=n[2])?t:"0"),i=Number(null!=(l=n[3])?l:"0");return Number.isNaN(r)||Number.isNaN(a)||Number.isNaN(i)||r<0||r>23||a<0||a>59||i<0||i>59?null:{h:r,m:a}}(e);if(!n)return"";let r=n.h%12;0===r&&(r=12);let a=n.h<12?"am":"pm",i=(null==t?void 0:t.upper)?a.toUpperCase():a;return"".concat(r,":").concat((l=n.m)<10?"0".concat(l):String(l)," ").concat(i)}function f(e){return e?new Date(e).toISOString():null}let g=e=>{if(!e)return"";let t=new Date(e),l=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(l(t.getMonth()+1),"-").concat(l(t.getDate()),"T").concat(l(t.getHours()),":").concat(l(t.getMinutes()))};function v(e){let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function w(e){return new Promise((t,l)=>{let n=new FileReader;n.onload=()=>t(String(n.result)),n.onerror=l,n.readAsDataURL(e)})}}}]);