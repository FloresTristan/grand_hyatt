{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/components/Snackbar.tsx"],"sourcesContent":["import {Alert, Snackbar, Button} from '@mui/material';\r\n\r\nexport type SnackbarSettings = {\r\n  open: boolean;\r\n  message: string;\r\n  severity: string;\r\n  actionLabel?: string; \r\n  actionCallback?: () => void; \r\n  duration?: number | null;\r\n}\r\n\r\ntype AlertProps ={\r\n  snackbarSettings: SnackbarSettings;\r\n  setSnackbarSettings: React.Dispatch<React.SetStateAction<SnackbarSettings>>;\r\n};\r\n\r\nexport default function SnackbarComponent({\r\n  snackbarSettings, setSnackbarSettings\r\n}: AlertProps){\r\n\r\n  const { open, message, severity, actionLabel, actionCallback, duration } = snackbarSettings; \r\n\r\n  const handleClose = (\r\n    // event: React.SyntheticEvent | Event, reason?: string\r\n  ) => {\r\n    // if (reason === 'clickaway') {\r\n    //   return;\r\n    // }\r\n    setSnackbarSettings((prev) => ({ ...prev, open: false, actionLable: null, actionCallback: null })); \r\n  };\r\n\r\n  const handleActionClick = () => {\r\n    if (actionCallback) {\r\n      actionCallback(); \r\n      setSnackbarSettings((prev) => ({ ...prev, open: false })); \r\n    }\r\n  };\r\n\r\n    return(\r\n       <Snackbar\r\n        open={open}\r\n        autoHideDuration={duration !== undefined ? duration : 2000}\r\n        anchorOrigin={{ vertical:'top', horizontal:'center' }}\r\n        onClose={handleClose}\r\n      >\r\n        <Alert\r\n          severity={severity}\r\n          variant=\"standard\"\r\n          className='w-full'\r\n          onClose={handleClose}\r\n          action={\r\n            actionLabel && actionCallback ? (\r\n              <Button color=\"error\" size=\"small\" onClick={handleActionClick}>\r\n                {actionLabel}\r\n              </Button>\r\n            ) : null\r\n          }\r\n        >  \r\n            {message}\r\n        </Alert>\r\n      </Snackbar> \r\n    )\r\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;;AAgBe,SAAS,kBAAkB,KAE7B;QAF6B,EACxC,gBAAgB,EAAE,mBAAmB,EAC1B,GAF6B;IAIxC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAE,QAAQ,EAAE,GAAG;IAE3E,MAAM,cAAc;QAGlB,gCAAgC;QAChC,YAAY;QACZ,IAAI;QACJ,oBAAoB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,MAAM;gBAAO,aAAa;gBAAM,gBAAgB;YAAK,CAAC;IAClG;IAEA,MAAM,oBAAoB;QACxB,IAAI,gBAAgB;YAClB;YACA,oBAAoB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,MAAM;gBAAM,CAAC;QACzD;IACF;IAEE,qBACG,6LAAC,0MAAA,CAAA,WAAQ;QACR,MAAM;QACN,kBAAkB,aAAa,YAAY,WAAW;QACtD,cAAc;YAAE,UAAS;YAAO,YAAW;QAAS;QACpD,SAAS;kBAET,cAAA,6LAAC,iMAAA,CAAA,QAAK;YACJ,UAAU;YACV,SAAQ;YACR,WAAU;YACV,SAAS;YACT,QACE,eAAe,+BACb,6LAAC,oMAAA,CAAA,SAAM;gBAAC,OAAM;gBAAQ,MAAK;gBAAQ,SAAS;0BACzC;;;;;yBAED;sBAGH;;;;;;;;;;;AAIb;KA9CwB","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/admin/users/userFormModal.tsx"],"sourcesContent":["import { Dialog, DialogBackdrop, DialogPanel, DialogTitle } from '@headlessui/react';\r\nimport { useEffect, useState } from 'react';\r\n\r\ntype CreateOrUpdatePayload = {\r\n  email: string;\r\n  displayName: string;\r\n  role: Role;\r\n  password?: string;     \r\n  newPassword?: string;  \r\n};\r\n\r\nexport default function UserFormModal({\r\n  open,\r\n  mode,\r\n  initial,\r\n  onClose,\r\n  onSubmit,\r\n}: {\r\n  open: boolean;\r\n  mode: 'create' | 'edit';\r\n  initial: UserRow | null;\r\n  onClose: () => void;\r\n  onSubmit: (p: CreateOrUpdatePayload) => void | Promise<void>;\r\n}) {\r\n  const [email, setEmail] = useState('');\r\n  const [displayName, setDisplayName] = useState('');\r\n  const [role, setRole] = useState<Role>('editor');\r\n  const [password, setPassword] = useState(''); \r\n  const [newPassword, setNewPassword] = useState(''); \r\n  const [busy, setBusy] = useState(false);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setErr(null);\r\n      setBusy(false);\r\n      if (mode === 'edit' && initial) {\r\n        setEmail(initial.email || '');\r\n        setDisplayName(initial.displayName || '');\r\n        setRole((initial.role as Role) || 'editor');\r\n        setPassword('');\r\n        setNewPassword('');\r\n      } else {\r\n        setEmail('');\r\n        setDisplayName('');\r\n        setRole('editor');\r\n        setPassword('');\r\n        setNewPassword('');\r\n      }\r\n    }\r\n  }, [open, mode, initial]);\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setErr(null);\r\n    setBusy(true);\r\n    try {\r\n      if (mode === 'create' && password.length < 6) {\r\n        throw new Error('Password must be at least 6 characters.');\r\n      }\r\n      await onSubmit({\r\n        email, displayName, role,\r\n        ...(mode === 'create' ? { password } : {}),\r\n        ...(mode === 'edit' ? { newPassword } : {}),\r\n      });\r\n    } catch (e: unknown) {\r\n      setErr(e?.message || 'Save failed');\r\n      setBusy(false);\r\n      return;\r\n    }\r\n    setBusy(false);\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} className=\"relative z-[100]\">\r\n      <DialogBackdrop className=\"fixed inset-0 bg-black/60\" />\r\n      <div className=\"fixed inset-0 overflow-y-auto\">\r\n        <div className=\"flex min-h-full items-center justify-center p-4\">\r\n          <DialogPanel className=\"w-full max-w-lg rounded-2xl bg-[#212e3f] text-white p-6 shadow-xl\">\r\n            <DialogTitle className=\"text-lg font-semibold\">\r\n              {mode === 'create' ? 'Add user' : 'Edit user'}\r\n            </DialogTitle>\r\n\r\n            <form onSubmit={handleSubmit} className=\"mt-4 space-y-3\">\r\n              <label className=\"block\">\r\n                <div className=\"mb-1 text-xs text-white\">Email</div>\r\n                <input\r\n                  type=\"email\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  disabled={mode === 'edit'}\r\n                  required\r\n                  className=\"w-full rounded-lg border border-neutral-200 px-3 py-2 outline-none focus:border-neutral-400 disabled:bg-neutral-700\"\r\n                />\r\n              </label>\r\n\r\n              <label className=\"block\">\r\n                <div className=\"mb-1 text-xs \">Display name</div>\r\n                <input\r\n                  value={displayName}\r\n                  onChange={(e) => setDisplayName(e.target.value)}\r\n                  required\r\n                  className=\"w-full rounded-lg border border-neutral-200 px-3 py-2 outline-none focus:border-neutral-400\"\r\n                />\r\n              </label>\r\n\r\n              <div className=\"grid grid-cols-2 gap-3\">\r\n                <label className=\"block\">\r\n                  <div className=\"mb-1 text-xs \">Role</div>\r\n                  <select\r\n                    value={role}\r\n                    onChange={(e) => setRole(e.target.value as Role)}\r\n                    className=\"w-full rounded-lg border border-neutral-200 px-3 py-2 outline-none focus:border-neutral-400\"\r\n                  >\r\n                    <option value=\"admin\" className=\"bg-[#212e3f]\">admin</option>\r\n                    <option value=\"editor\" className=\"bg-[#212e3f]\">editor</option>\r\n                  </select>\r\n                </label>\r\n              </div>\r\n\r\n              {mode === 'create' ? (\r\n                <label className=\"block\">\r\n                  <div className=\"mb-1 text-xs \">Password</div>\r\n                  <input\r\n                    type=\"password\"\r\n                    minLength={6}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                    className=\"w-full rounded-lg border border-neutral-200 px-3 py-2 outline-none focus:border-neutral-400\"\r\n                  />\r\n                </label>\r\n              ) : (\r\n                <label className=\"block\">\r\n                  <div className=\"mb-1 text-xs \">New password (optional)</div>\r\n                  <input\r\n                    type=\"password\"\r\n                    minLength={6}\r\n                    value={newPassword}\r\n                    onChange={(e) => setNewPassword(e.target.value)}\r\n                    placeholder=\"Leave blank to keep current\"\r\n                    className=\"w-full rounded-lg border border-neutral-200 px-3 py-2 outline-none focus:border-neutral-400\"\r\n                  />\r\n                </label>\r\n              )}\r\n\r\n              {err && <div className=\"text-sm text-red-600\">{err}</div>}\r\n\r\n              <div className=\"mt-4 flex justify-end gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onClose}\r\n                  className=\"rounded-lg bg-red-500 px-3 py-2 text-sm hover:bg-red-400\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  disabled={busy}\r\n                  className=\"rounded-lg bg-emerald-600 px-3 py-2 text-sm font-medium text-white hover:bg-emerald-500 disabled:opacity-60\"\r\n                >\r\n                  {/* {busy ? 'Savingâ€¦' : (mode === 'create' ? 'Create' : 'Save')} */}\r\n                  {busy ? (\r\n                    <span className=\"inline-flex items-center px-3 gap-2\">\r\n                      <svg className=\"h-4 w-4 animate-spin\" viewBox=\"0 0 24 24\" fill=\"none\" aria-hidden=\"true\">\r\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v4A4 4 0 004 12z\" />\r\n                      </svg>\r\n                    </span>\r\n                  ) : (\r\n                    'Save'\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </DialogPanel>\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/admin/users/createUserForm.tsx"],"sourcesContent":["\r\n'use client';\r\n\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport SnackbarComponent, {SnackbarSettings} from '../../components/Snackbar';\r\nimport UserFormModal from './userFormModal';\r\n\r\n\r\ntype Role = 'admin' | 'editor' ;\r\ntype UserRow = {\r\n  uid: string;\r\n  email: string;\r\n  displayName?: string;\r\n  role?: Role;\r\n  createdAt?: number; \r\n};\r\n\r\ntype CreateOrUpdatePayload = {\r\n  email: string;\r\n  displayName: string;\r\n  role: Role;\r\n  password?: string;     \r\n  newPassword?: string;  \r\n};\r\n\r\nexport default function UsersPage() {\r\n  const [users, setUsers] = useState<UserRow[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [mode, setMode] = useState<'create' | 'edit'>('create');\r\n  const [initial, setInitial] = useState<UserRow | null>(null);\r\n    const [snackbarSettings, setSnackbarSettings] = useState<SnackbarSettings>({\r\n    open: false,\r\n    message: '',\r\n    severity: '',\r\n  });\r\n\r\n  const [q, setQ] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, []);\r\n\r\n  async function loadUsers() {\r\n    setErr(null);\r\n    setLoading(true);\r\n    try {\r\n      const res = await fetch('/api/admin/users', { cache: 'no-store' });\r\n      const data = await res.json();\r\n      if (!res.ok) throw new Error(data?.error || 'Failed to load users');\r\n      const sorted = [...(data.items as UserRow[])]\r\n        .sort((a, b) => (b.createdAt ?? 0) - (a.createdAt ?? 0));\r\n      setUsers(sorted);\r\n    } catch (e: unknown) {\r\n      console.log(e)\r\n      setErr('Load failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const filtered = useMemo(() => {\r\n    const term = q.trim().toLowerCase();\r\n    if (!term) return users;\r\n    return users.filter(u =>\r\n      (u.email?.toLowerCase().includes(term)) ||\r\n      (u.displayName?.toLowerCase().includes(term)) ||\r\n      (u.role?.toLowerCase().includes(term))\r\n    );\r\n  }, [users, q]);\r\n\r\n  function onAdd() {\r\n    setMode('create');\r\n    setInitial(null);\r\n    setOpen(true);\r\n  }\r\n  function onEdit(user: UserRow) {\r\n    setMode('edit');\r\n    setInitial(user);\r\n    setOpen(true);\r\n  }\r\n  async function onDelete(user: UserRow) {\r\n    if (!confirm(`Delete user ${user.email}?`)) return;\r\n    try {\r\n      const res = await fetch(`/api/admin/users/${user.uid}`, { method: 'DELETE' });\r\n      const data = await res.json().catch(() => ({}));\r\n      if (!res.ok) throw new Error(data?.error || 'Delete failed');\r\n      setUsers(prev => prev.filter(u => u.uid !== user.uid));\r\n    } catch (e: unknown) {\r\n      console.log(e)\r\n      alert('Delete failed');\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(payload: CreateOrUpdatePayload, user?: UserRow | null) {\r\n    try {\r\n      if (mode === 'create') {\r\n        const res = await fetch('/api/admin/users/create', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            email: payload.email,\r\n            password: payload.password,\r\n            name: payload.displayName,\r\n            role: payload.role,\r\n          }),\r\n        });\r\n        const data = await res.json();\r\n        if (!res.ok){ \r\n          setSnackbarSettings((prev) => ({...prev,\r\n            open: true,\r\n            message: 'User Creation failed',\r\n            severity: 'error'\r\n          }))\r\n          throw new Error(data?.error || 'Create failed')\r\n        } else {\r\n          setSnackbarSettings((prev) => ({...prev,\r\n            open: true,\r\n            message: 'Created User Successfully ',\r\n            severity: 'success'\r\n          }))\r\n        }\r\n\r\n        await loadUsers();\r\n      } else {\r\n        const uid = user!.uid;\r\n        const body: unknown = {\r\n          displayName: payload.displayName,\r\n          role: payload.role,\r\n        };\r\n        if (payload.newPassword && payload.newPassword.length >= 6) {\r\n          body.password = payload.newPassword;\r\n        }\r\n        const res = await fetch(`/api/admin/users/${uid}`, {\r\n          method: 'PATCH',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(body),\r\n        });\r\n        const data = await res.json();\r\n        if (!res.ok){\r\n          setSnackbarSettings((prev) => ({...prev,\r\n            open: true,\r\n            message: 'User Update failed',\r\n            severity: 'error'\r\n          }))\r\n          throw new Error(data?.error || 'Update failed')\r\n        } else {\r\n          setSnackbarSettings((prev) => ({...prev,\r\n            open: true,\r\n            message: 'User Updated Successfully',\r\n            severity: 'success'\r\n          }))\r\n        }\r\n\r\n        setUsers(prev => prev.map(u => (u.uid === uid\r\n          ? { ...u, displayName: payload.displayName, role: payload.role}\r\n          : u)));\r\n      }\r\n\r\n      setOpen(false);\r\n    } catch (e: unknown) {\r\n      alert(e?.message || 'Save failed');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#151c2f] text-white p-6\">\r\n      <div className=\"mx-auto max-w-5xl space-y-4\">\r\n        <header className=\"md:flex flex-col md:flex-row items-center justify-end\">\r\n          <div className=\"flex justify-center items-center gap-2\">\r\n            <input\r\n              value={q}\r\n              onChange={(e) => setQ(e.target.value)}\r\n              placeholder=\"Search usersâ€¦\"\r\n              className=\"rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 text-sm\"\r\n            />\r\n            <button\r\n              onClick={onAdd}\r\n              className=\"rounded-lg bg-emerald-500/90 hover:bg-emerald-500 text-black font-medium px-3 py-2 text-sm\"\r\n            >\r\n              + Add user\r\n            </button>\r\n          </div>\r\n        </header>\r\n\r\n        {err && <div className=\"text-sm text-red-300\">{err}</div>}\r\n\r\n        <div className=\"h-[60vh] rounded-xl border overflow-scroll custom-scrollbar border-white/10 bg-[#212e3f]\">\r\n          <table className=\"w-full text-sm\">\r\n            <thead className=\"bg-white/5 \">\r\n              <tr>\r\n                <Th>Email</Th>\r\n                <Th>Name</Th>\r\n                <Th>Role</Th>\r\n                <Th>Created</Th>\r\n                <Th align=\"right\">Actions</Th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {loading ? (\r\n                <tr><td colSpan={6} className=\"p-4 text-center text-white/60\">Loadingâ€¦</td></tr>\r\n              ) : filtered.length === 0 ? (\r\n                <tr><td colSpan={6} className=\"p-6 text-center text-white/60\">No users found.</td></tr>\r\n              ) : (\r\n                filtered.map((u) => (\r\n                  <tr key={u.uid} className=\"border-t border-white/10 even:bg-white/5\">\r\n                    <Td>{u.email}</Td>\r\n                    <Td>{u.displayName || 'â€”'}</Td>\r\n                    <Td><RoleBadge role={u.role} /></Td>\r\n                    <Td>{u.createdAt ? new Date(u.createdAt).toLocaleString() : 'â€”'}</Td>\r\n                    <Td align=\"right\">\r\n                      <div className=\"flex justify-end gap-2\">\r\n                        <button\r\n                          className=\"rounded-md bg-white/10 hover:bg-white/20 px-2 py-1\"\r\n                          onClick={() => onEdit(u)}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          className=\"rounded-md bg-red-600 hover:bg-red-500 px-2 py-1\"\r\n                          onClick={() => onDelete(u)}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </Td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Modal */}\r\n        <UserFormModal\r\n          open={open}\r\n          mode={mode}\r\n          initial={initial}\r\n          onClose={() => setOpen(false)}\r\n          onSubmit={(p) => handleSubmit(p, initial)}\r\n        />\r\n      </div>\r\n      <SnackbarComponent snackbarSettings={snackbarSettings} setSnackbarSettings={setSnackbarSettings} /> \r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction Th({ children, align = 'left' }: { children: React.ReactNode; align?: 'left' | 'right' }) {\r\n  return (\r\n    <th className={`px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white/70 ${align === 'right' ? 'text-right' : 'text-left'}`}>\r\n      {children}\r\n    </th>\r\n  );\r\n}\r\n\r\nfunction Td({ children, align = 'left' }: { children: React.ReactNode; align?: 'left' | 'right' }) {\r\n  return (\r\n    <td className={`px-3 py-2 ${align === 'right' ? 'text-right' : 'text-left'}`}>\r\n      {children}\r\n    </td>\r\n  );\r\n}\r\n\r\nfunction RoleBadge({ role }: { role?: Role }) {\r\n  const r = (role || 'user') as Role;\r\n  const styles: Record<Role, string> = {\r\n    admin: 'bg-red-500/20 text-red-300',\r\n    editor: 'bg-blue-500/20 text-blue-300',\r\n    user: 'bg-white/10 text-white/70',\r\n  };\r\n  return <span className={`rounded-full px-2 py-0.5 text-xs ${styles[r]}`}>{r}</span>;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}