"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1921],{528:(e,t,n)=>{n.d(t,{B:()=>s});var l=n(5155);n(2115);var r=n(6766),o=n(8882),a=n(5808),i=n(7149);function s(e){let{open:t,src:n,alt:s="",onClose:c,imageRef:u}=e;return(0,l.jsx)(o.A,{open:t,onClose:c,maxWidth:!1,PaperProps:{sx:{bgcolor:"transparent",boxShadow:"none",borderRadius:2}},children:(0,l.jsx)(a.A,{sx:{p:0,position:"relative",width:{xs:"95vw",sm:"90vw"},height:{xs:"80vh",sm:"85vh"},overflow:"hidden",bgcolor:"transparent"},children:(0,l.jsx)(i.A,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,l.jsx)(r.default,{ref:u,src:n,alt:s,fill:!0,sizes:"100vw",priority:!0,className:"object-contain object-center"})})})})}},4302:(e,t,n)=>{n.d(t,{A:()=>c});var l=n(5155),r=n(2115),o=n(3554),a=n(7217),i=n(9564),s=n(5695);function c(e){let{xml:t,viewerId:n="krpano1",targetId:c="pano1",style:u,options:d,container:h="fullscreen"}=e,[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]),[v,x]=(0,r.useState)(!1),[w,b]=(0,r.useState)(null),[y,j]=(0,r.useState)(!1),N=(0,r.useRef)(!1),k=(0,r.useRef)(null),I=(0,s.usePathname)();return(0,r.useEffect)(()=>{(0,a.lP)({setHotspots:g,setLoading:x})},[]),(0,r.useEffect)(()=>(console.log("before"),window.ReactKrpanoLayerClick=e=>{var t,l,r;console.log("after");let o=null!=(r=k.current)?r:null==(t=(l=window).getkrpano)?void 0:t.call(l,n);if(console.log("layer clicked:",e),!o||!e.startsWith("submenu"))return;let a=o.get("layer[".concat(e,"].html"));if(!a)return;let i=f.find(e=>{var t;return(null==(t=e.name)?void 0:t.trim().toLowerCase())===String(a).trim().toLowerCase()});i?(console.log("\uD83D\uDFE2 Submenu clicked:",a,"→ hotspot:",i),b(i),j(!0),o.call("closem()"),o.call("close()")):console.warn("⚠️ No hotspot matched submenu:",a)},()=>{delete window.ReactKrpanoLayerClick}),[f,n]),(0,r.useEffect)(()=>{console.log("Path:",window.location.pathname)},[]),(0,r.useEffect)(()=>{if(m&&!v&&window.embedpano){if(N.current){var e,l,r;k.current=null!=(r=null==(e=(l=window).getkrpano)?void 0:e.call(l,n))?r:null;return}window.embedpano({id:n,target:c,xml:t,html5:"only",consolelog:!0,debugmode:!1,passQueryParameters:!0,jsaccess:"full",onready:e=>{k.current=e,console.log(e),console.log(I),I.includes("grandhyatt")&&(console.log("\uD83C\uDF07 Loading admin default scene: ninort"),e.call("\n             delayedcall(1,\n              loadscene(scene_ninort, null, MERGE, BLEND(get(transitiontime),get(transitiontweentype)));\n            );\n          ")),e.call("\n          for(set(i,0), i LT layer.count, inc(i),\n            if(startswith(get(layer[get(i)].name), 'submenu'),\n              set(layer[get(i)].enabled, true);\n              set(layer[get(i)].bgcapture, true);\n              set(layer[get(i)].onclick, js(window.ReactKrpanoLayerClick(get(name))));\n            );\n          );\n        "),console.log("✅ KRPano ready, XML loaded")},...d||{}}),N.current=!0}},[m,v,t,n,c,d,I]),console.log({hotspots:f}),console.log({selectedHotspot:w}),(0,r.useEffect)(()=>()=>{try{var e,t;null==(e=(t=window).removepano)||e.call(t,n)}catch(e){}N.current=!1,k.current=null},[n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.default,{src:"/vtour/tour.js",strategy:"afterInteractive",onReady:()=>p(!0)}),(0,l.jsx)("div",{id:c,style:{width:"100%",height:"100%",position:"relative",...u}}),"fullscreen"===h&&w&&(0,l.jsx)(i.A,{open:y,onClose:()=>{var e,t,l;j(!1);let r=null!=(l=k.current)?l:null==(e=(t=window).getkrpano)?void 0:e.call(t,n);r&&r.call("".concat("open","()"))},hotspot:w,container:h})]})}},7217:(e,t,n)=>{n.d(t,{$h:()=>m,Ah:()=>a,E2:()=>o,EY:()=>u,Hz:()=>r,IH:()=>p,Nb:()=>i,QP:()=>d,dT:()=>x,lP:()=>s,oS:()=>w,ox:()=>c,sH:()=>g,tX:()=>f,zM:()=>y});var l=n(5155);n(2115);let r=e=>{let{imageUrl:t,onFileSelect:n,onDrop:r,onDragOver:o,onPickClick:a,inputRef:i}=e;return(0,l.jsxs)("div",{className:"border border-dashed rounded-xl h-32 flex items-center justify-center relative hover:border-white/60 transition-colors cursor-pointer group",onClick:a,onDrop:r,onDragOver:o,title:"Click, drag & drop, or paste an image",children:[t?(0,l.jsx)("img",{src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):(0,l.jsxs)("div",{className:"text-center text-white/70 px-4",children:[(0,l.jsx)("div",{className:"text-sm",children:"Image Upload"}),(0,l.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Click, drag & drop, or paste"})]}),(0,l.jsx)("div",{className:"absolute inset-0 rounded-xl ring-0 group-hover:ring-2 ring-white/10 pointer-events-none"}),(0,l.jsx)("input",{ref:i,type:"file",accept:"image/*",onChange:n,className:"hidden"})]})};async function o(e){let{setEvents:t,setLoadingEvents:n}=e;n(!0);try{var l,r;let e=await fetch("/api/events",{cache:"no-store"}),n=await e.json();if(console.log(n,"fetched data for homepage"),console.log("ANON key fingerprint:",(l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===l)?void 0:l.slice(0,6),"…",(r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===r)?void 0:r.slice(-6)),!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load events");let o=(n.items||[]).sort((e,t)=>{var n,l;return(null!=(n=e.order)?n:0)-(null!=(l=t.order)?l:0)});t(o)}catch(e){console.error(e)}finally{n(!1)}}async function a(e){let{setEvents:t,setLoadingEvents:n}=e;n(!0);try{let e=await fetch("/api/admin/events",{cache:"no-store"}),n=await e.json();if(!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load events");let l=(n.items||[]).sort((e,t)=>{var n,l;return(null!=(n=e.order)?n:0)-(null!=(l=t.order)?l:0)});t(l)}catch(e){console.error(e)}finally{n(!1)}}async function i(e){let{setSeasons:t,setLoading:n}=e;try{null==n||n(!0);let e=await fetch("/api/seasons",{cache:"no-store"}),l=await e.json();if(!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load seasons");let r=Array.isArray(null==l?void 0:l.items)?l.items:[];return t(r),r}catch(e){return console.error(e),t([]),[]}finally{null==n||n(!1)}}async function s(e){let{setHotspots:t,setLoading:n}=e;try{null==n||n(!0);let e=await fetch("/api/hotspots",{cache:"no-store"}),l=await e.json();if(!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load seasons");let r=Array.isArray(null==l?void 0:l.items)?l.items:[];return t(r),r}catch(e){return console.error(e),t([]),[]}finally{null==n||n(!1)}}function c(e){let{label:t,value:n,onChange:r,placeholder:o}=e;return(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,l.jsx)("input",{value:n,onChange:e=>r(e.target.value),placeholder:o,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function u(e){let{label:t,value:n,onChange:r,placeholder:o,rows:a=5}=e;return(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,l.jsx)("textarea",{value:n,maxLength:500,onChange:e=>r(e.target.value),placeholder:o,rows:a,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 resize-y"})]})}function d(e){let{label:t,value:n,onChange:r,min:o,max:a}=e;return(0,l.jsxs)("label",{className:"block",children:[(0,l.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,l.jsx)("input",{style:{colorScheme:"dark"},type:"date",value:n,min:o,max:a,onChange:e=>r(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}let h=["all","live","scheduled","expired","hidden"],m=(e,t,n)=>{if(0===t)return n(!1),null!=e?e:[];{var l;console.log({tabIdx:t}),n(!0);let r=null!=(l=h[t])?l:"live";return console.log({wanted:r}),(null!=e?e:[]).filter(e=>(e=>{if(null==e?void 0:e.computed_status)return e.computed_status;if(!(null==e?void 0:e.published))return"hidden";let t=Date.now(),n=(null==e?void 0:e.publish_at)?new Date(e.publish_at).getTime():null,l=(null==e?void 0:e.unpublish_at)?new Date(e.unpublish_at).getTime():null;return n&&n>t?"scheduled":l&&l<=t?"expired":"live"})(e)===r)}};function p(e){let{publishModal:t,forceOpen:n,startDate:l,endDate:r}=e;if(!t)return!1;if(n)return!0;let o=new Date,a=l?function(e){let t=new Date(e);return t.setHours(0,0,0,0),t}(new Date(l)):new Date(0),i=r?function(e){let t=new Date(e);return t.setHours(23,59,59,999),t}(new Date(r)):new Date(864e13);return o>=a&&o<=i}function f(e,t){if(!e&&!t)return"";if(e&&!t)return b(e);if(!e&&t)return b(t);let n=new Date(e),l=new Date(t);if(isNaN(n.getTime())||isNaN(l.getTime()))return"";if(n.getFullYear()===l.getFullYear()&&n.getMonth()===l.getMonth()){let e=n.toLocaleString(void 0,{month:"short"});return"".concat(e," ").concat(n.getDate(),"–").concat(l.getDate(),", ").concat(n.getFullYear())}return"".concat(b(e)," – ").concat(b(t))}function g(e,t){let n=v(e),l=v(t);return n||l?n&&!l?n:!n&&l?l:"".concat(n," – ").concat(l):""}function v(e,t){var n;let l=function(e){var t,n;if(!(null==e?void 0:e.trim()))return null;let l=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2})(?:\.\d+)?)?$/.exec(e.trim());if(!l)return null;let r=Number(l[1]),o=Number(null!=(t=l[2])?t:"0"),a=Number(null!=(n=l[3])?n:"0");return Number.isNaN(r)||Number.isNaN(o)||Number.isNaN(a)||r<0||r>23||o<0||o>59||a<0||a>59?null:{h:r,m:o}}(e);if(!l)return"";let r=l.h%12;0===r&&(r=12);let o=l.h<12?"am":"pm",a=(null==t?void 0:t.upper)?o.toUpperCase():o;return"".concat(r,":").concat((n=l.m)<10?"0".concat(n):String(n)," ").concat(a)}function x(e){return e?new Date(e).toISOString():null}let w=e=>{if(!e)return"";let t=new Date(e),n=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()),"T").concat(n(t.getHours()),":").concat(n(t.getMinutes()))};function b(e){let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function y(e){return new Promise((t,n)=>{let l=new FileReader;l.onload=()=>t(String(l.result)),l.onerror=n,l.readAsDataURL(e)})}},9564:(e,t,n)=>{n.d(t,{A:()=>u});var l=n(5155),r=n(2115),o=n(6766),a=n(528),i=n(7217),s=n(6643),c=n(335);function u(e){var t,n;let{open:u,onClose:d,hotspot:h,container:m="contained"}=e,[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),x=(0,r.useRef)(null),[w,b]=(0,r.useState)({});if((0,r.useEffect)(()=>{u||f(!1)},[u]),(0,r.useEffect)(()=>{b({dateRange:(0,i.tX)((null==h?void 0:h.startdate)||"",(null==h?void 0:h.enddate)||""),timeText:(0,i.sH)((null==h?void 0:h.starttime)||"",(null==h?void 0:h.endtime)||"")})},[null==h?void 0:h.startdate,null==h?void 0:h.enddate,null==h?void 0:h.starttime,null==h?void 0:h.endtime]),console.log({hotspot:h}),!h||!h.title&&!h.description&&!h.image_url&&!w.dateRange&&!w.timeText||!u)return null;console.log({hotspot:h});let y="contained"===m?"absolute":"fixed";return(0,l.jsxs)("div",{id:"hotspotModal",className:"".concat(y," inset-0 ").concat("contained"===m?"z-10":"z-[50]"," flex p-4 lg:p-0 items-center justify-center"),role:"dialog","aria-modal":"true",children:[(0,l.jsx)("div",{className:"".concat(y," inset-0 bg-black/60 backdrop-blur-[1px]"),onClick:d}),(0,l.jsxs)("div",{className:"relative z-10 w-full max-w-[400px] md:max-w-[560px] rounded-2xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{onClick:d,"aria-label":"Close",className:"absolute -right-3 -top-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg cursor-pointer ring-4 ring-white",children:"\xd7"}),(0,l.jsxs)("div",{className:"px-5 pb-5 pt-6",children:[(null==h?void 0:h.image_url)&&(0,l.jsxs)("div",{className:"relative mx-auto mb-4 h-32 w-full overflow-hidden rounded-xl  ".concat("fullscreen"===m?"md:h-60":"md:h-32"),children:[(0,l.jsx)(o.default,{src:h.image_url,alt:h.title||"",fill:!0,unoptimized:!0,className:"object-contain object-center bg-black/50 cursor-zoom-in   hover:scale-[1.02] transition-transform duration-300 hover:opacity-70 hover:duration-500",sizes:"(max-width: 640px) 100vw, 560px",priority:!0,onClick:()=>v(!0)}),(0,l.jsx)(a.B,{open:g,src:h.image_url||"",alt:h.name||"",imageRef:x,onClose:()=>v(!1)})]}),(0,l.jsx)("h2",{className:"text-center text-neutral-600 text-3xl font-semibold tracking-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==h?void 0:h.title}),((null==w?void 0:w.dateRange)||(null==w?void 0:w.timeText))&&(0,l.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm text-neutral-700",children:[(null==w?void 0:w.dateRange)&&(0,l.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,l.jsx)(s.A,{sx:{fontSize:20}}),null==w?void 0:w.dateRange]}),(null==w?void 0:w.timeText)&&(0,l.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,l.jsx)(c.A,{sx:{fontSize:20}}),null==w?void 0:w.timeText]})]}),!!(null==h?void 0:h.description)&&(0,l.jsx)("div",{className:"mt-4 max-h-56 overflow-y-auto",children:(0,l.jsx)("p",{className:"text-sm leading-relaxed text-neutral-800 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==h?void 0:h.description})}),((null==h?void 0:h.cta_label)||(null==h?void 0:h.cta_href))&&(0,l.jsx)("div",{className:"mt-6 flex justify-center",children:(null==h?void 0:h.cta_href)?(0,l.jsx)("a",{href:null==h?void 0:h.cta_href,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(t=null==h?void 0:h.cta_label)?t:"Learn more"}):(0,l.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(n=null==h?void 0:h.cta_label)?n:"Learn more"})})]})]})]})}}}]);