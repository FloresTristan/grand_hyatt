(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{528:(e,t,l)=>{"use strict";l.d(t,{B:()=>o});var n=l(5155);l(2115);var a=l(6766),r=l(8882),i=l(5808),s=l(7149);function o(e){let{open:t,src:l,alt:o="",onClose:c,imageRef:d}=e;return(0,n.jsx)(r.A,{open:t,onClose:c,maxWidth:!1,PaperProps:{sx:{bgcolor:"transparent",boxShadow:"none",borderRadius:2}},children:(0,n.jsx)(i.A,{sx:{p:0,position:"relative",width:{xs:"95vw",sm:"90vw"},height:{xs:"80vh",sm:"85vh"},overflow:"hidden",bgcolor:"transparent"},children:(0,n.jsx)(s.A,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,n.jsx)(a.default,{ref:d,src:l,alt:o,fill:!0,sizes:"100vw",priority:!0,className:"object-contain object-center"})})})})}},1247:(e,t,l)=>{Promise.resolve().then(l.bind(l,6666))},3649:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var n=l(5155),a=l(5726),r=l(2302),i=l(8534);function s(e){let{snackbarSettings:t,setSnackbarSettings:l}=e,{open:s,message:o,severity:c,actionLabel:d,actionCallback:u,duration:h}=t,m=()=>{l(e=>({...e,open:!1,actionLable:null,actionCallback:null}))};return(0,n.jsx)(a.A,{open:s,autoHideDuration:void 0!==h?h:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:m,children:(0,n.jsx)(r.A,{severity:c,variant:"standard",className:"w-full",onClose:m,action:d&&u?(0,n.jsx)(i.A,{color:"error",size:"small",onClick:()=>{u&&(u(),l(e=>({...e,open:!1})))},children:d}):null,children:o})})}},6217:(e,t,l)=>{"use strict";l.d(t,{A:()=>c});var n=l(5155),a=l(2115),r=l(6766),i=l(6643),s=l(335),o=l(528);function c(e){var t,l,c;let{open:d,onClose:u,events:h,container:m="contained",initialIndex:x=0}=e,[p,g]=(0,a.useState)(()=>{var e;return Math.min(Math.max(x,0),Math.max(0,(null!=(e=null==h?void 0:h.length)?e:1)-1))}),[v,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{var e;g(Math.min(Math.max(x,0),Math.max(0,(null!=(e=null==h?void 0:h.length)?e:1)-1)))},[h,x,d]),console.log({index:p});let b=(0,a.useRef)([]),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=b.current[p];e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[p]),(0,a.useEffect)(()=>{function e(e){e.target===w.current&&f(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{var e;if(d&&!((null!=(e=null==h?void 0:h.length)?e:0)<1))return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t);function t(e){"Escape"===e.key&&u(),"ArrowLeft"===e.key&&g(e=>(e-1+h.length)%h.length),"ArrowRight"===e.key&&g(e=>(e+1)%h.length)}},[d,h,u]);let j=(null!=(t=null==h?void 0:h.length)?t:0)>0;if(!d||!j)return null;let y="contained"===m?"absolute":"fixed",N=h[p];return console.log({current:N}),(0,n.jsxs)("div",{className:"".concat(y," inset-0 ").concat("contained"===m?"z-10":"z-[50]"," flex items-center justify-center"),role:"dialog","aria-modal":"true",children:[(0,n.jsx)("div",{className:"".concat(y," inset-0 bg-black/60 backdrop-blur-[1px]"),onClick:u}),(0,n.jsxs)("div",{className:"relative z-10 w-full max-w-[290px] md:max-w-[560px] rounded-2xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:u,"aria-label":"Close",className:"absolute -right-3 -top-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg cursor-pointer ring-4 ring-white",children:"\xd7"}),h.length>1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{"aria-label":"Previous",onClick:()=>g(e=>(e-1+h.length)%h.length),className:"absolute left-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"‹"}),(0,n.jsx)("button",{"aria-label":"Next",onClick:()=>g(e=>(e+1)%h.length),className:"absolute right-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"›"})]}),(0,n.jsxs)("div",{className:"px-5 pb-5 pt-6",children:[(null==N?void 0:N.imageUrl)&&(0,n.jsxs)("div",{className:"relative mx-auto mb-4 h-32 w-full overflow-hidden rounded-xl  ".concat("fullscreen"===m?"md:h-60":"md:h-32"),children:[(0,n.jsx)(r.default,{src:N.imageUrl,alt:N.title||"",fill:!0,unoptimized:!0,className:"object-contain object-center bg-black/50 cursor-zoom-in   hover:scale-[1.02] transition-transform duration-300 hover:opacity-70 hover:duration-500",sizes:"(max-width: 640px) 100vw, 560px",priority:!0,onClick:()=>f(!0)}),(0,n.jsx)(o.B,{open:v,src:N.imageUrl||"",alt:N.title||"",imageRef:w,onClose:()=>f(!1)})]}),(0,n.jsx)("h2",{className:"text-center text-neutral-600 text-3xl font-semibold tracking-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==N?void 0:N.title}),!!(null==N?void 0:N.subheading)&&(0,n.jsx)("p",{className:"mt-1 text-center text-sm text-neutral-600 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==N?void 0:N.subheading}),((null==N?void 0:N.dateRange)||(null==N?void 0:N.timeText))&&(0,n.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm text-neutral-700",children:[(null==N?void 0:N.dateRange)&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,n.jsx)(i.A,{sx:{fontSize:20}}),null==N?void 0:N.dateRange]}),(null==N?void 0:N.timeText)&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,n.jsx)(s.A,{sx:{fontSize:20}}),null==N?void 0:N.timeText]})]}),!!(null==N?void 0:N.description)&&(0,n.jsx)("div",{className:"mt-4 max-h-56 overflow-y-auto",children:(0,n.jsx)("p",{className:"text-sm leading-relaxed text-neutral-800 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==N?void 0:N.description})}),((null==N?void 0:N.ctaLabel)||(null==N?void 0:N.ctaHref))&&(0,n.jsx)("div",{className:"mt-6 flex justify-center",children:(null==N?void 0:N.ctaHref)?(0,n.jsx)("a",{href:null==N?void 0:N.ctaHref,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(l=null==N?void 0:N.ctaLabel)?l:"Learn more"}):(0,n.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(c=null==N?void 0:N.ctaLabel)?c:"Learn more"})}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("div",{className:"items-center w-[25%] md:w-[15%]",children:h.length>1&&(0,n.jsx)("div",{className:"mt-4 w-full max-w-md mx-auto  overflow-x-scroll custom-scrollbar",children:(0,n.jsx)("div",{className:"flex items-center gap-3 px-2",children:h.map((e,t)=>{let l=t===p;return(0,n.jsx)("button",{ref:e=>{b.current[t]=e},"aria-label":"Go to slide ".concat(t+1),"aria-current":l?"true":void 0,onClick:()=>g(t),className:"\n                            h-2 md:h-3 w-2 md:w-3 rounded-full transition-all duration-300\n                            flex-shrink-0 focus:outline-none\n                            ".concat(l?"bg-neutral-900":"border-neutral-300 bg-neutral-200 hover:bg-neutral-400","\n                          ")},t)})})})})})]})]})]})}},6414:(e,t,l)=>{"use strict";l.d(t,{N:()=>n});let n=(0,l(3254).createBrowserClient)("https://enadqzzfyywsbictfwvg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs")},6666:(e,t,l)=>{"use strict";l.d(t,{default:()=>k});var n=l(5155),a=l(2115),r=l(6217),i=l(6414),s=l(1368);async function o(e,t){var l,n;let a=(null==(l=e.name.split(".").pop())?void 0:l.toLowerCase())||"jpg",r="".concat((0,s.A)(),".").concat(a),o="events/".concat(r),{error:c}=await i.N.storage.from("events").upload(o,e,{contentType:e.type,upsert:!1});if(c)throw c;let{data:d}=i.N.storage.from("events").getPublicUrl(o);return(null==t?void 0:t.oldPath)&&await i.N.storage.from("events").remove([t.oldPath]).catch(()=>{}),{path:o,publicUrl:null!=(n=null==d?void 0:d.publicUrl)?n:null}}var c=l(7149),d=l(9267),u=l(5715),h=l(3127),m=l(4426),x=l(2114),p=l(6673),g=l(1005),v=l(7857),f=l(644),b=l(5294),w=l(7365),j=l(3649),y=l(7217);function N(e){let{status:t}=e,l={live:"Live",scheduled:"Scheduled",expired:"Expired",hidden:"Hidden"};return(0,n.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ".concat({live:"bg-green-600/15 text-green-300 ring-1 ring-green-500/30",scheduled:"bg-blue-600/15  text-blue-300  ring-1 ring-blue-500/30",expired:"bg-red-600/15   text-red-300   ring-1 ring-red-500/30",hidden:"bg-zinc-600/15  text-zinc-300  ring-1 ring-zinc-500/30"}[t]),title:l[t],"aria-label":"Status: ".concat(l[t]),children:l[t]})}var S=l(3114);function k(){var e,t,l,i,s,k,C,I,A,E;let[D,_]=(0,a.useState)(""),[T,M]=(0,a.useState)(""),[z,O]=(0,a.useState)(""),[J,L]=(0,a.useState)(null),[U,P]=(0,a.useState)(null),[R,Y]=(0,a.useState)(""),[H,Z]=(0,a.useState)(""),[F,X]=(0,a.useState)(""),[W,B]=(0,a.useState)(""),[V,Q]=(0,a.useState)(!1),[G,K]=(0,a.useState)(""),[$,q]=(0,a.useState)(""),[ee,et]=(0,a.useState)(!0),[el,en]=(0,a.useState)(!0),[ea,er]=(0,a.useState)(""),[ei,es]=(0,a.useState)(""),[eo,ec]=(0,a.useState)(null),[ed,eu]=(0,a.useState)(0),[eh,em]=(0,a.useState)([]),[ex,ep]=(0,a.useState)(!1),[eg,ev]=(0,a.useState)(""),[ef,eb]=(0,a.useState)({id:"",title:"",subheading:"",description:"",start_date:"",end_date:"",start_time:"",end_time:"",cta_label:"",cta_href:"",image_url:"",image_path:"",order:0}),[ew,ej]=(0,a.useState)(!1),[ey,eN]=(0,a.useState)(!1),[eS,ek]=(0,a.useState)(!1),[eC,eI]=(0,a.useState)({open:!1,message:"",severity:""}),[eA,eE]=(0,a.useState)(null),[eD,e_]=(0,a.useState)(0),[eT,eM]=(0,a.useState)(!1),ez="cmsDraft_v1",eO=(0,a.useRef)(null),eJ=(0,a.useRef)(null);function eL(e){L(e),P(URL.createObjectURL(e))}function eU(){_(""),M(""),O(""),Y(""),Z(""),X(""),et(!0),en(!0),er(""),es(""),L(null),P(null),localStorage.removeItem(ez),ev(""),eb({id:""}),eN(!1),B(""),Q(!1),K(""),q("")}async function eP(){try{ek(!0);let e=eh.map(e=>e.id),t=await fetch("/api/admin/events/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),l=await t.json();if(t.ok)eI(e=>({...e,open:!0,message:"Event Order Saved",severity:"success"}));else throw eI(e=>({...e,open:!0,message:"Event Reorder failed",severity:"error"})),Error((null==l?void 0:l.error)||"Reorder failed");ej(!1)}catch(e){eI(t=>({...t,open:!0,message:e instanceof Error?e.message:"Event Reorder failed",severity:"error"}))}ek(!1)}async function eR(){try{let l,n;if(""==D||null==D)return void eI(e=>({...e,open:!0,message:"Title Needed",severity:"error"}));ek(!0);let a=null,r=null,i=null==ef?void 0:ef.image_path;if(J){let e=await o(J,{oldPath:i});a=e.path,r=e.publicUrl}else if(1===ed&&eo){var e,t;a=null!=(e=null==ef?void 0:ef.image_path)?e:null,r=null!=(t=null==ef?void 0:ef.image_url)?t:null}let s={title:D,subheading:T,description:z,startDate:R||null,endDate:H||null,startTime:F||null,endTime:W||null,ctaLabel:ea,ctaHref:ei,image_path:a,image_url:r,published:V,publishAt:(0,y.dT)(G)||null,unpublishAt:(0,y.dT)($)||null};if(eo&&0!==ed)if(l=await fetch("/api/admin/events/".concat(eo),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await l.json(),l.ok)eI(e=>({...e,open:!0,message:"Event Updated Successfully",severity:"success"}));else throw eI(e=>({...e,open:!0,message:"Event Update failed",severity:"error"})),Error((null==n?void 0:n.error)||"Update failed");else if(l=await fetch("/api/admin/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await l.json(),l.ok){let e=localStorage.getItem(ez),t=e?JSON.parse(e):{};localStorage.setItem(ez,JSON.stringify({...t,eventId:n.id})),0===ed&&eI(e=>({...e,open:!0,message:"Event Created Successfully",severity:"success"}))}else throw eI(e=>({...e,open:!0,message:"Event Creation failed",severity:"error"})),Error((null==n?void 0:n.error)||"Create failed");0!==ed&&(0,y.Ah)({setEvents:em,setLoadingEvents:ep}),r&&P(r)}catch(e){eI(t=>({...t,open:!0,message:e instanceof Error?e.message:"Save failed",severity:"error"}))}ek(!1),eU()}async function eY(e){eE(e),eI({open:!0,message:"Are you sure you want to delete this event?",severity:"warning",actionLabel:"Delete",duration:1e4,actionCallback:async()=>{try{let t=await fetch("/api/admin/events/".concat(e),{method:"DELETE"}),l=await t.json();if(t.ok)eI({open:!0,message:"Event Deleted Successfully",severity:"success"}),em(t=>t.filter(t=>t.id!==e)),eo===e&&ec(null);else throw eI({open:!0,message:"Delete Event failed",severity:"error"}),Error((null==l?void 0:l.error)||"Delete failed")}catch(e){eI({open:!0,message:e instanceof Error?e.message:"Delete failed",severity:"error"})}finally{eE(null)}}})}(0,a.useEffect)(()=>{try{var e,t,l,n,a;let r=localStorage.getItem(ez);if(!r)return;let i=JSON.parse(r);_(i.title||""),M(i.subheading||""),O(i.description||""),Y(i.startDate||""),Z(i.endDate||""),X(i.startTime||""),B(i.endTime||""),et(null==(e=i.publishModal)||e),en(null==(t=i.forceOpen)||t),er(i.ctaLabel||""),es(i.ctaHref||""),Q(null==(l=i.published)||l),K(null!=(n=i.publishAt)?n:""),q(null!=(a=i.unpublishAt)?a:""),i.imageDataUrl&&P(i.imageDataUrl)}catch(e){}},[]),(0,a.useEffect)(()=>{let e=setTimeout(async()=>{try{let e=U;!e&&J&&(e=await (0,y.zM)(J),P(e)),localStorage.setItem(ez,JSON.stringify({title:D,subheading:T,description:z,startDate:R,endDate:H,startTime:F,endTime:W,publishModal:ee,forceOpen:el,ctaLabel:ea,ctaHref:ei,imageDataUrl:e,published:V,publishAt:G,unpublishAt:$}))}catch(e){}},300);return()=>clearTimeout(e)},[D,T,z,R,H,F,W,ee,el,ea,ei,J,U,V,G,$]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{var e,t,l;let n=U&&U.startsWith("data:")?U:null;if(!n)try{let e=localStorage.getItem(ez);n=e&&null!=(l=JSON.parse(e).imageDataUrl)?l:null}catch(e){}let a={title:D,subheading:T,description:z,startDate:R,endDate:H,startTime:F,endTime:W,publishModal:ee,forceOpen:el,ctaLabel:ea,ctaHref:ei,imageDataUrl:n};null==(t=eJ.current)||null==(e=t.contentWindow)||e.postMessage({type:"cms:update",payload:a},window.location.origin)},120);return()=>clearTimeout(e)},[D,T,z,R,H,F,W,ee,el,ea,ei,U]),(0,a.useEffect)(()=>{function e(e){if(!e.clipboardData)return;let t=Array.from(e.clipboardData.items).find(e=>e.type.startsWith("image/"));if(!t)return;let l=t.getAsFile();l&&eL(l)}return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[]),(0,a.useEffect)(()=>{0!==ed&&(0,y.Ah)({setEvents:em,setLoadingEvents:ep})},[ed]),console.log("time",(0,y.dT)(G),G+":00.000Z"),console.log("utctest",(0,y.oS)((0,y.dT)(G))),console.log(ef),console.log("id",eo);let eH=eh.map(e=>{var t,l,n,a,r,i;return{id:e.id,imageUrl:null!=(t=e.image_url)?t:void 0,title:null!=(l=e.title)?l:"(untitled)",subheading:null!=(n=e.subheading)?n:"",description:null!=(a=e.description)?a:"",dateRange:(0,y.tX)(e.start_date,e.end_date),timeText:(0,y.sH)(e.start_time,e.end_time),ctaLabel:null!=(r=e.cta_label)?r:"",ctaHref:null!=(i=e.cta_href)?i:""}}),eZ={id:eo||"new",imageUrl:null!=U?U:void 0,title:(null==D?void 0:D.trim())||"(untitled)",subheading:T||"",description:z||"",dateRange:(0,y.tX)(R,H),timeText:(0,y.sH)(F,W),ctaLabel:ea||"",ctaHref:ei||""},eF=(null!=(k=null==D||null==(e=D.trim())?void 0:e.length)?k:0)>0||(null!=(C=null==T||null==(t=T.trim())?void 0:t.length)?C:0)>0||(null!=(I=null==z||null==(l=z.trim())?void 0:l.length)?I:0)>0||!!R||!!H||!!F||!!W||(null!=(A=null==ea||null==(i=ea.trim())?void 0:i.length)?A:0)>0||(null!=(E=null==ei||null==(s=ei.trim())?void 0:s.length)?E:0)>0||!!U,eX=0===ed?eF?[eZ,...eH]:eH:eg?[eZ]:eH,eW=R&&H&&new Date(H)<new Date(R)?"End date cannot be before start date.":"",eB=(0,y.IH)({publishModal:ee,forceOpen:el,startDate:R,endDate:H}),eV=0===ed||1===ed&&!!eg;(0,a.useEffect)(()=>{0===ed&&eU()},[ed]);let eQ=(0,a.useMemo)(()=>(0,y.$h)(eh,eD,eM),[eh,eD]);return(0,n.jsxs)("div",{className:"font-sans flex flex-col gap-4 md:flex-row min-h-screen md:h-screen p-8 md:gap-8 sm:px-20 bg-[#151c2f]",children:[(0,n.jsxs)("div",{className:"md:w-[30%] text-white h-[90%] md:overflow-scroll custom-scrollbar shadow-xl rounded-xl bg-[#212e3f] p-3 md:p-5 space-y-4",children:[(0,n.jsx)(c.A,{sx:{borderBottom:1,borderColor:"rgba(255,255,255,0.1)"},children:(0,n.jsxs)(d.A,{value:ed,onChange:(e,t)=>{eu(t),eU(),ev(""),em([]),0===t&&ec(null)},variant:"fullWidth",sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)"},"& .Mui-selected":{color:"#fff"},"& .MuiTabs-indicator":{backgroundColor:"#60a5fa"}},children:[(0,n.jsx)(u.A,{label:"Create"}),(0,n.jsx)(u.A,{label:"Update"})]})}),1===ed&&(0,n.jsxs)("div",{className:"space-y-3 ".concat(ey?"hidden":""),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"px-2 text-sm text-white/80",children:"Reorder events (drag rows)"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:eP,disabled:eS||!ew,className:"rounded-md bg-blue-500/90 hover:bg-blue-500 px-3 py-1.5 text-sm disabled:opacity-50 hover:cursor-pointer disabled:cursor-not-allowed",children:eS?(0,n.jsx)("span",{className:"inline-flex items-center px-2 gap-2",children:(0,n.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4A4 4 0 004 12z"})]})}):"Save"}),(0,n.jsx)(h.A,{size:"small",onClick:()=>{(0,y.Ah)({setEvents:em,setLoadingEvents:ep}),eU()},children:(0,n.jsx)(v.A,{htmlColor:"#9ca3af",fontSize:"small"})})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(c.A,{sx:{borderBottom:1,borderColor:"rgba(255,255,255,0.1)"},children:(0,n.jsxs)(d.A,{value:eD,onChange:(e,t)=>{e_(t),console.log(t)},variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)",fontSize:"12px",px:1.5,textTransform:"none",whiteSpace:"nowrap"},"& .Mui-selected":{color:"#67ff56"},"& .MuiTabs-indicator":{backgroundColor:"#60fa68"},"& .MuiTabs-scrollButtons.Mui-disabled":{opacity:.3}},children:[(0,n.jsx)(u.A,{label:"All"}),(0,n.jsx)(u.A,{label:"Live"}),(0,n.jsx)(u.A,{label:"Scheduled"}),(0,n.jsx)(u.A,{label:"Expired"}),(0,n.jsx)(u.A,{label:"Hidden"})]})})}),ex?(0,n.jsx)("div",{className:"flex justify-center py-4",children:(0,n.jsx)(m.A,{size:20})}):(0,n.jsx)(b.JY,{onDragEnd:function(e){if(!e.destination)return;let t=e.source.index,l=e.destination.index;t!==l&&(em(e=>{let n=[...e],[a]=n.splice(t,1);return n.splice(l,0,a),n}),ej(!0))},children:(0,n.jsx)(b.gL,{droppableId:"events-order",isDropDisabled:eT,children:e=>(0,n.jsxs)("ul",{ref:e.innerRef,...e.droppableProps,className:"divide-y divide-white/10 rounded-lg h-[150px] md:h-[420px]  overflow-scroll custom-scrollbar",children:[eQ.map((e,t)=>(0,n.jsx)(b.sx,{draggableId:e.id,index:t,isDragDisabled:eT,children:t=>{var l;return(0,n.jsxs)("li",{ref:t.innerRef,...t.draggableProps,className:"flex items-center justify-between even:bg-[#151c2f] p-2  hover:bg-white/10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{...t.dragHandleProps,className:"text-white/60 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:(0,n.jsx)(w.A,{fontSize:"small"})}),(0,n.jsx)("span",{className:"text-white hover:cursor-pointer truncate max-w-[70px] md:max-w-[150px]",onClick:()=>{let t=e.id,l=eh.find(e=>e.id===t);console.log("here ev",l),l&&(ec(l.id),_(l.title||""),M(l.subheading||""),O(l.description||""),Y(l.start_date||""),Z(l.end_date||""),X(l.start_time||""),B(l.end_time||""),er(l.cta_label||""),es(l.cta_href||""),P(l.image_url||null),Q(!!l.published),K((0,y.oS)(l.publish_at)||""),q((0,y.oS)(l.unpublish_at)||""))},children:e.title||"(untitled)"})]}),(0,n.jsxs)("span",{className:"text-xs text-white/40",children:[(0,n.jsx)(N,{status:null!=(l=e.computed_status)?l:"hidden"}),(0,n.jsx)(h.A,{"aria-label":"delete",onClick:()=>{eN(!0),ev(e.id);let t=e.id,l=eh.find(e=>e.id===t);if(l){var n;ec(l.id),_(l.title||""),M(l.subheading||""),O(l.description||""),Y(l.start_date||""),Z(l.end_date||""),X(l.start_time||""),B(l.end_time||""),er(l.cta_label||""),es(l.cta_href||""),P(l.image_url||null),Q(null!=(n=l.published)&&n),K((0,y.oS)(l.publish_at)||""),q((0,y.oS)(l.unpublish_at)||"")}},children:(0,n.jsx)(f.A,{className:"text-green-400 hover:text-green-500 transition duration-700 ease-in-out"})}),(0,n.jsx)(h.A,{"aria-label":"delete",onClick:()=>{eY(e.id)},children:(0,n.jsx)(g.A,{className:"text-red-400 hover:text-red-500 transition duration-700 ease-in-out"})})]})]})}},e.id)),e.placeholder,0===eh.length&&(0,n.jsx)("li",{className:"p-3 text-sm text-white/60",children:"No events yet."})]})})})]}),ey&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(h.A,{size:"small",onClick:()=>{ev(""),eU(),(0,y.Ah)({setEvents:em,setLoadingEvents:ep})},children:(0,n.jsx)("div",{className:"border border-[rgba(255,255,255,0.1)] flex justify-center items-center p-2 rounded hover:bg-white/10 transition duration-300 ease-in-out",children:(0,n.jsx)(S.A,{htmlColor:"#9ca3af",fontSize:"small"})})}),(0,n.jsxs)(x.A,{fullWidth:!0,displayEmpty:!0,size:"small",value:eg,onChange:e=>{let t=String(e.target.value);ev(t);let l=eh.find(e=>e.id===t);l&&(eb(l),ec(l.id),_(l.title||""),M(l.subheading||""),O(l.description||""),Y(l.start_date||""),Z(l.end_date||""),X(l.start_time||""),B(l.end_time||""),er(l.cta_label||""),es(l.cta_href||""),P(l.image_url||null),Q(!!l.published),K((0,y.oS)(l.publish_at)||""),q((0,y.oS)(l.unpublish_at)||""))},sx:{color:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.15)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},renderValue:e=>{var t;return e?(null==(t=eh.find(t=>t.id===e))?void 0:t.title)||"---":"Select event…"},children:[ex&&(0,n.jsxs)(p.A,{disabled:!0,children:[(0,n.jsx)(m.A,{size:16,sx:{mr:1}})," Loading…"]}),!ex&&0===eh.length&&(0,n.jsx)(p.A,{disabled:!0,children:"No events yet"}),eh.map(e=>(0,n.jsx)(p.A,{value:e.id,children:e.title||"(untitled)"},e.id))]})]}),(0,n.jsx)("div",{className:"text-xs text-white/60",children:eg?"Editing: ".concat(eg):"Pick an event to edit"})]}),eV&&(0,n.jsxs)("div",{className:"md:h-[90%] overflow-scroll custom-scrollbar",children:[(0,n.jsx)(y.Hz,{imageUrl:null!=U?U:void 0,onPickClick:function(){var e;null==(e=eO.current)||e.click()},onFileSelect:function(e){var t;let l=null==(t=e.target.files)?void 0:t[0];l&&eL(l)},onDrop:function(e){var t;e.preventDefault();let l=null==(t=e.dataTransfer.files)?void 0:t[0];l&&l.type.startsWith("image/")&&eL(l)},onDragOver:function(e){e.preventDefault()},inputRef:eO}),(0,n.jsxs)("div",{className:"space-y-1 mt-2",children:[(0,n.jsx)(y.ox,{label:"Title",value:D,onChange:_,placeholder:"Enter title"}),(0,n.jsx)(y.ox,{label:"Subheading",value:T,onChange:M,placeholder:"Optional subheading"}),(0,n.jsx)(y.EY,{label:"Description",value:z,onChange:O,placeholder:"Write a short description...",rows:3}),(0,n.jsx)("div",{className:"text-xs text-white/60",children:(0,n.jsxs)("div",{className:"text-end",children:[z.length," chars"]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)(y.QP,{label:"Start date",value:R,onChange:Y}),(0,n.jsx)(y.QP,{label:"End date",value:H,onChange:Z,min:R||void 0})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 mt-1 gap-2",children:[(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:"Start time"}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"time",value:F,onChange:e=>X(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]}),(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:"End time"}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"time",value:W,onChange:e=>B(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})]}),eW&&(0,n.jsx)("div",{className:"text-xs text-red-300",children:eW}),(0,n.jsxs)("div",{className:"grid grid-cols-2 mt-1 gap-2",children:[(0,n.jsx)(y.ox,{label:"CTA label",value:ea,onChange:er,placeholder:"Learn More"}),(0,n.jsx)(y.ox,{label:"CTA link",value:ei,onChange:es,placeholder:"https://example.com"})]}),(0,n.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[(0,n.jsxs)("label",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:V,onChange:e=>Q(e.target.checked)}),(0,n.jsx)("div",{className:"text-sm text-white/80",children:"Published"})]}),(0,n.jsx)("div",{}),(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:"Publish at"}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"datetime-local",value:G,onChange:e=>K(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]}),(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:"Unpublish at"}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"datetime-local",value:$,min:G||void 0,onChange:e=>q(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 mt-1 pt-2",children:[(0,n.jsx)("button",{onClick:eR,disabled:eS,className:"px-3 py-2 rounded-lg bg-green-400 hover:bg-green-500 hover:cursor-pointer text-black font-medium disabled:cursor-not-allowed",children:eS?(0,n.jsxs)("span",{className:"inline-flex items-center gap-2",children:[0!==ed&&eo?"Updating…":"Creating…",(0,n.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4A4 4 0 004 12z"})]})]}):0!==ed&&eo?"Update":"Publish"}),(0,n.jsx)("button",{onClick:function(){_(""),M(""),O(""),Y(""),Z(""),X(""),er(""),es(""),L(null),P(null),localStorage.removeItem(ez),Q(!1),K(""),q("")},className:"px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white hover:cursor-pointer",children:"Clear"})]})]})]}),(0,n.jsxs)("div",{className:"md:w-[70%] h-[90%] md:overflow-scroll custom-scrollbar text-white shadow-xl rounded-xl bg-[#212e3f] gap-4 p-3 md:p-5",children:[(0,n.jsx)("div",{className:"mb-2 text-sm text-white/60",children:"Live preview from website"}),(0,n.jsxs)("div",{className:"relative w-full h-[720px] md:h-full border border-white/10 bg-white rounded-xl overflow-hidden",children:[(0,n.jsx)("iframe",{ref:eJ,src:"/",title:"Website Live Preview",className:"absolute inset-0 object-contain h-full w-full"}),(0,n.jsx)(r.A,{container:"contained",open:eB,onClose:()=>{},events:eX,initialIndex:Math.max(0,eX.findIndex(e=>e.id===eo))})]}),(0,n.jsx)("div",{className:"mt-3 flex justify-between items-center border-t border-white/10 pt-3",children:(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:ee,onChange:e=>et(e.target.checked)}),(0,n.jsx)("span",{children:"Event popup modal (preview)"})]})})]}),(0,n.jsx)(j.A,{snackbarSettings:eC,setSnackbarSettings:eI})]})}},7217:(e,t,l)=>{"use strict";l.d(t,{$h:()=>m,Ah:()=>i,E2:()=>r,EY:()=>d,Hz:()=>a,IH:()=>x,Nb:()=>s,QP:()=>u,dT:()=>f,lP:()=>o,oS:()=>b,ox:()=>c,sH:()=>g,tX:()=>p,zM:()=>j});var n=l(5155);l(2115);let a=e=>{let{imageUrl:t,onFileSelect:l,onDrop:a,onDragOver:r,onPickClick:i,inputRef:s}=e;return(0,n.jsxs)("div",{className:"border border-dashed rounded-xl h-32 flex items-center justify-center relative hover:border-white/60 transition-colors cursor-pointer group",onClick:i,onDrop:a,onDragOver:r,title:"Click, drag & drop, or paste an image",children:[t?(0,n.jsx)("img",{src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):(0,n.jsxs)("div",{className:"text-center text-white/70 px-4",children:[(0,n.jsx)("div",{className:"text-sm",children:"Image Upload"}),(0,n.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Click, drag & drop, or paste"})]}),(0,n.jsx)("div",{className:"absolute inset-0 rounded-xl ring-0 group-hover:ring-2 ring-white/10 pointer-events-none"}),(0,n.jsx)("input",{ref:s,type:"file",accept:"image/*",onChange:l,className:"hidden"})]})};async function r(e){let{setEvents:t,setLoadingEvents:l}=e;l(!0);try{var n,a;let e=await fetch("/api/events",{cache:"no-store"}),l=await e.json();if(console.log(l,"fetched data for homepage"),console.log("ANON key fingerprint:",(n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===n)?void 0:n.slice(0,6),"…",(a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===a)?void 0:a.slice(-6)),!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load events");let r=(l.items||[]).sort((e,t)=>{var l,n;return(null!=(l=e.order)?l:0)-(null!=(n=t.order)?n:0)});t(r)}catch(e){console.error(e)}finally{l(!1)}}async function i(e){let{setEvents:t,setLoadingEvents:l}=e;l(!0);try{let e=await fetch("/api/admin/events",{cache:"no-store"}),l=await e.json();if(!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load events");let n=(l.items||[]).sort((e,t)=>{var l,n;return(null!=(l=e.order)?l:0)-(null!=(n=t.order)?n:0)});t(n)}catch(e){console.error(e)}finally{l(!1)}}async function s(e){let{setSeasons:t,setLoading:l}=e;try{null==l||l(!0);let e=await fetch("/api/seasons",{cache:"no-store"}),n=await e.json();if(!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load seasons");let a=Array.isArray(null==n?void 0:n.items)?n.items:[];return t(a),a}catch(e){return console.error(e),t([]),[]}finally{null==l||l(!1)}}async function o(e){let{setHotspots:t,setLoading:l}=e;try{null==l||l(!0);let e=await fetch("/api/hotspots",{cache:"no-store"}),n=await e.json();if(!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load seasons");let a=Array.isArray(null==n?void 0:n.items)?n.items:[];return t(a),a}catch(e){return console.error(e),t([]),[]}finally{null==l||l(!1)}}function c(e){let{label:t,value:l,onChange:a,placeholder:r}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:r,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function d(e){let{label:t,value:l,onChange:a,placeholder:r,rows:i=5}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("textarea",{value:l,maxLength:500,onChange:e=>a(e.target.value),placeholder:r,rows:i,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 resize-y"})]})}function u(e){let{label:t,value:l,onChange:a,min:r,max:i}=e;return(0,n.jsxs)("label",{className:"block",children:[(0,n.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,n.jsx)("input",{style:{colorScheme:"dark"},type:"date",value:l,min:r,max:i,onChange:e=>a(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}let h=["all","live","scheduled","expired","hidden"],m=(e,t,l)=>{if(0===t)return l(!1),null!=e?e:[];{var n;console.log({tabIdx:t}),l(!0);let a=null!=(n=h[t])?n:"live";return console.log({wanted:a}),(null!=e?e:[]).filter(e=>(e=>{if(null==e?void 0:e.computed_status)return e.computed_status;if(!(null==e?void 0:e.published))return"hidden";let t=Date.now(),l=(null==e?void 0:e.publish_at)?new Date(e.publish_at).getTime():null,n=(null==e?void 0:e.unpublish_at)?new Date(e.unpublish_at).getTime():null;return l&&l>t?"scheduled":n&&n<=t?"expired":"live"})(e)===a)}};function x(e){let{publishModal:t,forceOpen:l,startDate:n,endDate:a}=e;if(!t)return!1;if(l)return!0;let r=new Date,i=n?function(e){let t=new Date(e);return t.setHours(0,0,0,0),t}(new Date(n)):new Date(0),s=a?function(e){let t=new Date(e);return t.setHours(23,59,59,999),t}(new Date(a)):new Date(864e13);return r>=i&&r<=s}function p(e,t){if(!e&&!t)return"";if(e&&!t)return w(e);if(!e&&t)return w(t);let l=new Date(e),n=new Date(t);if(isNaN(l.getTime())||isNaN(n.getTime()))return"";if(l.getFullYear()===n.getFullYear()&&l.getMonth()===n.getMonth()){let e=l.toLocaleString(void 0,{month:"short"});return"".concat(e," ").concat(l.getDate(),"–").concat(n.getDate(),", ").concat(l.getFullYear())}return"".concat(w(e)," – ").concat(w(t))}function g(e,t){let l=v(e),n=v(t);return l||n?l&&!n?l:!l&&n?n:"".concat(l," – ").concat(n):""}function v(e,t){var l;let n=function(e){var t,l;if(!(null==e?void 0:e.trim()))return null;let n=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2})(?:\.\d+)?)?$/.exec(e.trim());if(!n)return null;let a=Number(n[1]),r=Number(null!=(t=n[2])?t:"0"),i=Number(null!=(l=n[3])?l:"0");return Number.isNaN(a)||Number.isNaN(r)||Number.isNaN(i)||a<0||a>23||r<0||r>59||i<0||i>59?null:{h:a,m:r}}(e);if(!n)return"";let a=n.h%12;0===a&&(a=12);let r=n.h<12?"am":"pm",i=(null==t?void 0:t.upper)?r.toUpperCase():r;return"".concat(a,":").concat((l=n.m)<10?"0".concat(l):String(l)," ").concat(i)}function f(e){return e?new Date(e).toISOString():null}let b=e=>{if(!e)return"";let t=new Date(e),l=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(l(t.getMonth()+1),"-").concat(l(t.getDate()),"T").concat(l(t.getHours()),":").concat(l(t.getMinutes()))};function w(e){let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function j(e){return new Promise((t,l)=>{let n=new FileReader;n.onload=()=>t(String(n.result)),n.onerror=l,n.readAsDataURL(e)})}}},e=>{e.O(0,[1309,3254,6766,8019,4834,4033,8406,8054,8441,5964,7358],()=>e(e.s=1247)),_N_E=e.O()}]);