(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1342:(e,t,l)=>{Promise.resolve().then(l.bind(l,3870))},3649:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(5155),r=l(5726),n=l(2302),s=l(8534);function i(e){let{snackbarSettings:t,setSnackbarSettings:l}=e,{open:i,message:o,severity:c,actionLabel:d,actionCallback:u,duration:h}=t,m=()=>{l(e=>({...e,open:!1,actionLable:null,actionCallback:null}))};return(0,a.jsx)(r.A,{open:i,autoHideDuration:void 0!==h?h:2e3,anchorOrigin:{vertical:"top",horizontal:"center"},onClose:m,children:(0,a.jsx)(n.A,{severity:c,variant:"standard",className:"w-full",onClose:m,action:d&&u?(0,a.jsx)(s.A,{color:"error",size:"small",onClick:()=>{u&&(u(),l(e=>({...e,open:!1})))},children:d}):null,children:o})})}},3870:(e,t,l)=>{"use strict";l.d(t,{default:()=>N});var a=l(5155),r=l(2115),n=l(6217),s=l(6414),i=l(1368);async function o(e,t){var l,a;let r=(null==(l=e.name.split(".").pop())?void 0:l.toLowerCase())||"jpg",n="".concat((0,i.A)(),".").concat(r),o="events/".concat(n),{error:c}=await s.N.storage.from("events").upload(o,e,{contentType:e.type,upsert:!1});if(c)throw c;let{data:d}=s.N.storage.from("events").getPublicUrl(o);return(null==t?void 0:t.oldPath)&&await s.N.storage.from("events").remove([t.oldPath]).catch(()=>{}),{path:o,publicUrl:null!=(a=null==d?void 0:d.publicUrl)?a:null}}var c=l(7149),d=l(9267),u=l(5715),h=l(3127),m=l(4426),x=l(8138),p=l(6673),g=l(1005),f=l(7857),v=l(644),b=l(5294),w=l(7365),j=l(3649),y=l(7217);function N(){var e,t,l,s,i,N,k,C,S,D;let[E,_]=(0,r.useState)(""),[A,I]=(0,r.useState)(""),[T,z]=(0,r.useState)(""),[L,O]=(0,r.useState)(null),[M,R]=(0,r.useState)(null),[U,P]=(0,r.useState)(""),[J,H]=(0,r.useState)(""),[Y,W]=(0,r.useState)(""),[F,X]=(0,r.useState)(!0),[B,Q]=(0,r.useState)(!0),[Z,V]=(0,r.useState)(""),[$,G]=(0,r.useState)(""),[q,K]=(0,r.useState)(null),[ee,et]=(0,r.useState)(0),[el,ea]=(0,r.useState)([]),[er,en]=(0,r.useState)(!1),[es,ei]=(0,r.useState)(""),[eo,ec]=(0,r.useState)({id:"",title:"",subheading:"",description:"",start_date:"",end_date:"",start_time:"",cta_label:"",cta_href:"",image_url:"",image_path:"",order:0}),[ed,eu]=(0,r.useState)(!1),[eh,em]=(0,r.useState)(!1),[ex,ep]=(0,r.useState)(!1),[eg,ef]=(0,r.useState)({open:!1,message:"",severity:""}),[ev,eb]=(0,r.useState)(null),ew="cmsDraft_v1",ej=(0,r.useRef)(null),ey=(0,r.useRef)(null);function eN(e){O(e),R(URL.createObjectURL(e))}function ek(){_(""),I(""),z(""),P(""),H(""),W(""),X(!0),Q(!0),V(""),G(""),O(null),R(null),localStorage.removeItem(ew),ei(""),ec({id:""}),em(!1)}async function eC(){try{ep(!0);let e=el.map(e=>e.id),t=await fetch("/api/events/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),l=await t.json();if(t.ok)ef(e=>({...e,open:!0,message:"Event Order Saved",severity:"success"}));else throw ef(e=>({...e,open:!0,message:"Event Reorder failed",severity:"error"})),Error((null==l?void 0:l.error)||"Reorder failed");eu(!1)}catch(e){ef(t=>({...t,open:!0,message:e instanceof Error?e.message:"Event Reorder failed",severity:"error"}))}ep(!1)}async function eS(){try{let l,a;if(""==E||null==E)return void ef(e=>({...e,open:!0,message:"Title Needed",severity:"error"}));ep(!0);let r=null,n=null,s=null==eo?void 0:eo.image_path;if(L){let e=await o(L,{oldPath:s});r=e.path,n=e.publicUrl}else if(1===ee&&q){var e,t;r=null!=(e=null==eo?void 0:eo.image_path)?e:null,n=null!=(t=null==eo?void 0:eo.image_url)?t:null}let i={title:E,subheading:A,description:T,startDate:U||null,endDate:J||null,startTime:Y||null,ctaLabel:Z,ctaHref:$,image_path:r,image_url:n,status:"draft"};if(q&&0!==ee)if(l=await fetch("/api/events/".concat(q),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),a=await l.json(),l.ok)ef(e=>({...e,open:!0,message:"Event Updated Successfully",severity:"success"}));else throw ef(e=>({...e,open:!0,message:"Event Update failed",severity:"error"})),Error((null==a?void 0:a.error)||"Update failed");else if(l=await fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),a=await l.json(),l.ok){let e=localStorage.getItem(ew),t=e?JSON.parse(e):{};localStorage.setItem(ew,JSON.stringify({...t,eventId:a.id})),0===ee&&ef(e=>({...e,open:!0,message:"Event Created Successfully",severity:"success"}))}else throw ef(e=>({...e,open:!0,message:"Event Creation failed",severity:"error"})),Error((null==a?void 0:a.error)||"Create failed");0!==ee&&(0,y.y$)({setEvents:ea,setLoadingEvents:en}),n&&R(n)}catch(e){ef(t=>({...t,open:!0,message:e instanceof Error?e.message:"Save failed",severity:"error"}))}ep(!1),ek()}async function eD(e){eb(e),ef({open:!0,message:"Are you sure you want to delete this event?",severity:"warning",actionLabel:"Delete",duration:1e4,actionCallback:async()=>{try{let t=await fetch("/api/events/".concat(e),{method:"DELETE"}),l=await t.json();if(t.ok)ef({open:!0,message:"Event Deleted Successfully",severity:"success"}),ea(t=>t.filter(t=>t.id!==e)),q===e&&K(null);else throw ef({open:!0,message:"Delete Event failed",severity:"error"}),Error((null==l?void 0:l.error)||"Delete failed")}catch(e){ef({open:!0,message:e instanceof Error?e.message:"Delete failed",severity:"error"})}finally{eb(null)}}})}(0,r.useEffect)(()=>{try{var e,t;let l=localStorage.getItem(ew);if(!l)return;let a=JSON.parse(l);_(a.title||""),I(a.subheading||""),z(a.description||""),P(a.startDate||""),H(a.endDate||""),W(a.startTime||""),X(null==(e=a.publishModal)||e),Q(null==(t=a.forceOpen)||t),V(a.ctaLabel||""),G(a.ctaHref||""),a.imageDataUrl&&R(a.imageDataUrl)}catch(e){}},[]),(0,r.useEffect)(()=>{let e=setTimeout(async()=>{try{let e=M;!e&&L&&(e=await (0,y.zM)(L),R(e)),localStorage.setItem(ew,JSON.stringify({title:E,subheading:A,description:T,startDate:U,endDate:J,startTime:Y,publishModal:F,forceOpen:B,ctaLabel:Z,ctaHref:$,imageDataUrl:e}))}catch(e){}},300);return()=>clearTimeout(e)},[E,A,T,U,J,Y,F,B,Z,$,L,M]),(0,r.useEffect)(()=>{let e=setTimeout(()=>{var e,t,l;let a=M&&M.startsWith("data:")?M:null;if(!a)try{let e=localStorage.getItem(ew);a=e&&null!=(l=JSON.parse(e).imageDataUrl)?l:null}catch(e){}let r={title:E,subheading:A,description:T,startDate:U,endDate:J,startTime:Y,publishModal:F,forceOpen:B,ctaLabel:Z,ctaHref:$,imageDataUrl:a};null==(t=ey.current)||null==(e=t.contentWindow)||e.postMessage({type:"cms:update",payload:r},window.location.origin)},120);return()=>clearTimeout(e)},[E,A,T,U,J,Y,F,B,Z,$,M]),(0,r.useEffect)(()=>{function e(e){if(!e.clipboardData)return;let t=Array.from(e.clipboardData.items).find(e=>e.type.startsWith("image/"));if(!t)return;let l=t.getAsFile();l&&eN(l)}return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[]),(0,r.useEffect)(()=>{0!==ee&&(0,y.y$)({setEvents:ea,setLoadingEvents:en})},[ee]),console.log(el),console.log(eo),console.log("id",q);let eE=el.map(e=>{var t,l,a,r,n,s;return{imageUrl:null!=(t=e.image_url)?t:void 0,title:null!=(l=e.title)?l:"(untitled)",subheading:null!=(a=e.subheading)?a:"",description:null!=(r=e.description)?r:"",dateRange:(0,y.tX)(e.start_date,e.end_date),timeText:(0,y.Rs)(e.start_time),ctaLabel:null!=(n=e.cta_label)?n:"",ctaHref:null!=(s=e.cta_href)?s:""}}),e_={imageUrl:null!=M?M:void 0,title:(null==E?void 0:E.trim())||"(untitled)",subheading:A||"",description:T||"",dateRange:(0,y.tX)(U,J),timeText:(0,y.Rs)(Y),ctaLabel:Z||"",ctaHref:$||""},eA=(null!=(N=null==E||null==(e=E.trim())?void 0:e.length)?N:0)>0||(null!=(k=null==A||null==(t=A.trim())?void 0:t.length)?k:0)>0||(null!=(C=null==T||null==(l=T.trim())?void 0:l.length)?C:0)>0||!!U||!!J||!!Y||(null!=(S=null==Z||null==(s=Z.trim())?void 0:s.length)?S:0)>0||(null!=(D=null==$||null==(i=$.trim())?void 0:i.length)?D:0)>0||!!M,eI=0===ee?eA?[e_,...eE]:eE:es?[e_]:eE,eT=U&&J&&new Date(J)<new Date(U)?"End date cannot be before start date.":"",ez=(0,y.IH)({publishModal:F,forceOpen:B,startDate:U,endDate:J}),eL=0===ee||1===ee&&!!es;return(0,r.useEffect)(()=>{0===ee&&ek()},[ee]),(0,a.jsxs)("div",{className:"font-sans flex flex-col gap-4 md:flex-row min-h-screen md:h-screen p-8 md:gap-8 sm:px-20 bg-[#151c2f]",children:[(0,a.jsxs)("div",{className:"md:w-[30%] text-white h-[90%] md:overflow-scroll custom-scrollbar shadow-xl rounded-xl bg-[#212e3f] p-3 md:p-5 space-y-4",children:[(0,a.jsx)(c.A,{sx:{borderBottom:1,borderColor:"rgba(255,255,255,0.1)"},children:(0,a.jsxs)(d.A,{value:ee,onChange:(e,t)=>{et(t),ek(),ei(""),ea([]),0===t&&K(null)},variant:"fullWidth",sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)"},"& .Mui-selected":{color:"#fff"},"& .MuiTabs-indicator":{backgroundColor:"#60a5fa"}},children:[(0,a.jsx)(u.A,{label:"Create"}),(0,a.jsx)(u.A,{label:"Update"})]})}),1===ee&&(0,a.jsxs)("div",{className:"space-y-3 ".concat(eh?"hidden":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-white/80",children:"Reorder events (drag rows)"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:eC,disabled:ex||!ed,className:"rounded-md bg-blue-500/90 hover:bg-blue-500 px-3 py-1.5 text-sm disabled:opacity-50 hover:cursor-pointer disabled:cursor-not-allowed",children:ex?(0,a.jsx)("span",{className:"inline-flex items-center px-2 gap-2",children:(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4A4 4 0 004 12z"})]})}):"Save"}),(0,a.jsx)(h.A,{size:"small",onClick:()=>{(0,y.y$)({setEvents:ea,setLoadingEvents:en}),ek()},children:(0,a.jsx)(f.A,{htmlColor:"#9ca3af",fontSize:"small"})})]})]}),er?(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)(m.A,{size:20})}):(0,a.jsx)(b.JY,{onDragEnd:function(e){if(!e.destination)return;let t=e.source.index,l=e.destination.index;t!==l&&(ea(e=>{let a=[...e],[r]=a.splice(t,1);return a.splice(l,0,r),a}),eu(!0))},children:(0,a.jsx)(b.gL,{droppableId:"events-order",children:e=>(0,a.jsxs)("ul",{ref:e.innerRef,...e.droppableProps,className:"divide-y divide-white/10 rounded-lg h-[150px] md:h-[550px] overflow-scroll custom-scrollbar",children:[el.map((e,t)=>(0,a.jsx)(b.sx,{draggableId:e.id,index:t,children:l=>(0,a.jsxs)("li",{ref:l.innerRef,...l.draggableProps,className:"flex items-center justify-between even:bg-[#151c2f] p-2  hover:bg-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{...l.dragHandleProps,className:"text-white/60 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:(0,a.jsx)(w.A,{fontSize:"small"})}),(0,a.jsx)("span",{className:"w-6 text-white/60 text-xs tabular-nums",children:t+1}),(0,a.jsx)("span",{className:"text-white hover:cursor-pointer",onClick:()=>{let t=e.id,l=el.find(e=>e.id===t);l&&(K(l.id),_(l.title||""),I(l.subheading||""),z(l.description||""),P(l.start_date||""),H(l.end_date||""),W(l.start_time||""),V(l.cta_label||""),G(l.cta_href||""),R(l.image_url||null)),console.log(e.id)},children:e.title||"(untitled)"})]}),(0,a.jsxs)("span",{className:"text-xs text-white/40",children:[(0,a.jsx)(h.A,{"aria-label":"delete",onClick:()=>{em(!0),ei(e.id);let t=e.id,l=el.find(e=>e.id===t);l&&(K(l.id),_(l.title||""),I(l.subheading||""),z(l.description||""),P(l.start_date||""),H(l.end_date||""),W(l.start_time||""),V(l.cta_label||""),G(l.cta_href||""),R(l.image_url||null))},children:(0,a.jsx)(v.A,{className:"text-green-400 hover:text-green-500 transition duration-700 ease-in-out"})}),(0,a.jsx)(h.A,{"aria-label":"delete",onClick:()=>{eD(e.id)},children:(0,a.jsx)(g.A,{className:"text-red-400 hover:text-red-500 transition duration-700 ease-in-out"})})]})]})},e.id)),e.placeholder,0===el.length&&(0,a.jsx)("li",{className:"p-3 text-sm text-white/60",children:"No events yet."})]})})})]}),eh&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x.A,{fullWidth:!0,displayEmpty:!0,size:"small",value:es,onChange:e=>{let t=String(e.target.value);ei(t);let l=el.find(e=>e.id===t);console.log("here ev",l),l&&(ec(l),K(l.id),_(l.title||""),I(l.subheading||""),z(l.description||""),P(l.start_date||""),H(l.end_date||""),W(l.start_time||""),V(l.cta_label||""),G(l.cta_href||""),R(l.image_url||null))},sx:{color:"#fff","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.15)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},renderValue:e=>{var t;return e?(null==(t=el.find(t=>t.id===e))?void 0:t.title)+" hi":"Select event…"},children:[er&&(0,a.jsxs)(p.A,{disabled:!0,children:[(0,a.jsx)(m.A,{size:16,sx:{mr:1}})," Loading…"]}),!er&&0===el.length&&(0,a.jsx)(p.A,{disabled:!0,children:"No events yet"}),el.map(e=>(0,a.jsx)(p.A,{value:e.id,children:e.title||"(untitled)"},e.id))]}),(0,a.jsx)(h.A,{size:"small",onClick:()=>{ei(""),ek(),(0,y.y$)({setEvents:ea,setLoadingEvents:en})},children:(0,a.jsx)(f.A,{htmlColor:"#9ca3af",fontSize:"small"})})]}),(0,a.jsx)("div",{className:"text-xs text-white/60",children:es?"Editing: ".concat(es):"Pick an event to edit"})]}),eL&&(0,a.jsxs)("div",{className:"md:h-[90%] overflow-scroll custom-scrollbar",children:[(0,a.jsx)(y.Hz,{imageUrl:null!=M?M:void 0,onPickClick:function(){var e;null==(e=ej.current)||e.click()},onFileSelect:function(e){var t;let l=null==(t=e.target.files)?void 0:t[0];l&&eN(l)},onDrop:function(e){var t;e.preventDefault();let l=null==(t=e.dataTransfer.files)?void 0:t[0];l&&l.type.startsWith("image/")&&eN(l)},onDragOver:function(e){e.preventDefault()},inputRef:ej}),(0,a.jsx)(y.ox,{label:"Title",value:E,onChange:_,placeholder:"Enter title"}),(0,a.jsx)(y.ox,{label:"Subheading",value:A,onChange:I,placeholder:"Optional subheading"}),(0,a.jsx)(y.EY,{label:"Description",value:T,onChange:z,placeholder:"Write a short description...",rows:3}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(y.QP,{label:"Start date",value:U,onChange:P}),(0,a.jsx)(y.QP,{label:"End date",value:J,onChange:H,min:U||void 0})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"text-sm mb-1 text-white/80",children:"Start time"}),(0,a.jsx)("input",{style:{colorScheme:"dark"},type:"time",value:Y,onChange:e=>W(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]}),eT&&(0,a.jsx)("div",{className:"text-xs text-red-300",children:eT}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(y.ox,{label:"CTA label",value:Z,onChange:V,placeholder:"Learn More"}),(0,a.jsx)(y.ox,{label:"CTA link",value:$,onChange:G,placeholder:"https://example.com"})]}),(0,a.jsx)("div",{className:"text-xs text-white/60",children:(0,a.jsxs)("div",{className:"mt-1",children:[T.length," chars"]})}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:eS,disabled:ex,className:"px-3 py-2 rounded-lg bg-green-400 hover:bg-green-500 hover:cursor-pointer text-black font-medium disabled:cursor-not-allowed",children:ex?(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[0!==ee&&q?"Updating…":"Creating…",(0,a.jsxs)("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4A4 4 0 004 12z"})]})]}):0!==ee&&q?"Update":"Create"}),(0,a.jsx)("button",{onClick:ek,className:"px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white hover:cursor-pointer",children:"Clear"})]})]})]}),(0,a.jsxs)("div",{className:"md:w-[70%] h-[90%] md:overflow-scroll custom-scrollbar text-white shadow-xl rounded-xl bg-[#212e3f] gap-4 p-3 md:p-5",children:[(0,a.jsx)("div",{className:"mb-2 text-sm text-white/60",children:"Live preview from website"}),(0,a.jsxs)("div",{className:"relative w-full h-[720px] md:h-full border border-white/10 bg-white rounded-xl overflow-hidden",children:[(0,a.jsx)("iframe",{ref:ey,src:"/",title:"Website Live Preview",className:"absolute inset-0 w-full h-full"}),(0,a.jsx)(n.A,{container:"contained",open:ez,onClose:()=>{},events:eI,initialIndex:Math.max(0,eI.findIndex(e=>e.title===E))})]}),(0,a.jsx)("div",{className:"mt-3 flex justify-between items-center border-t border-white/10 pt-3",children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:F,onChange:e=>X(e.target.checked)}),(0,a.jsx)("span",{children:"Publish event popup (preview)"})]})})]}),(0,a.jsx)(j.A,{snackbarSettings:eg,setSnackbarSettings:ef})]})}},6217:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});var a=l(5155),r=l(2115),n=l(6766);function s(e){var t,l,s;let{open:i,onClose:o,events:c,container:d="contained",initialIndex:u=0}=e,[h,m]=(0,r.useState)(()=>{var e;return Math.min(Math.max(u,0),Math.max(0,(null!=(e=null==c?void 0:c.length)?e:1)-1))});(0,r.useEffect)(()=>{var e;m(Math.min(Math.max(u,0),Math.max(0,(null!=(e=null==c?void 0:c.length)?e:1)-1)))},[c,u,i]),(0,r.useEffect)(()=>{var e;if(i&&!((null!=(e=null==c?void 0:c.length)?e:0)<1))return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t);function t(e){"Escape"===e.key&&o(),"ArrowLeft"===e.key&&m(e=>(e-1+c.length)%c.length),"ArrowRight"===e.key&&m(e=>(e+1)%c.length)}},[i,c,o]);let x=(null!=(t=null==c?void 0:c.length)?t:0)>0;if(!i||!x)return null;let p="contained"===d?"absolute":"fixed",g=c[h];return(0,a.jsxs)("div",{className:"".concat(p," inset-0 ").concat("contained"===d?"z-10":"z-[9999]"," flex items-center justify-center"),role:"dialog","aria-modal":"true",children:[(0,a.jsx)("div",{className:"".concat(p," inset-0 bg-black/60 backdrop-blur-[1px]"),onClick:o}),(0,a.jsxs)("div",{className:"relative z-10 w-full max-w-[560px] rounded-2xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:o,"aria-label":"Close",className:"absolute -right-3 -top-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-600 text-white shadow-lg ring-4 ring-white",children:"\xd7"}),c.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{"aria-label":"Previous",onClick:()=>m(e=>(e-1+c.length)%c.length),className:"absolute left-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"‹"}),(0,a.jsx)("button",{"aria-label":"Next",onClick:()=>m(e=>(e+1)%c.length),className:"absolute right-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"›"})]}),(0,a.jsxs)("div",{className:"px-5 pb-5 pt-6",children:[(null==g?void 0:g.imageUrl)&&(0,a.jsx)("div",{className:"relative mx-auto mb-4 h-32 w-full overflow-hidden rounded-xl sm:h-36",children:(0,a.jsx)(n.default,{src:g.imageUrl,alt:g.title||"",fill:!0,unoptimized:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, 560px",priority:!0})}),(0,a.jsx)("h2",{className:"text-center text-neutral-600 text-3xl font-semibold tracking-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==g?void 0:g.title}),!!(null==g?void 0:g.subheading)&&(0,a.jsx)("p",{className:"mt-1 text-center text-sm text-neutral-600 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==g?void 0:g.subheading}),((null==g?void 0:g.dateRange)||(null==g?void 0:g.timeText))&&(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm text-neutral-700",children:[(null==g?void 0:g.dateRange)&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"inline-block h-5 w-5 rounded-[4px] border border-neutral-400"}),null==g?void 0:g.dateRange]}),(null==g?void 0:g.timeText)&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"inline-block h-5 w-5 rounded-full border border-neutral-400"}),null==g?void 0:g.timeText]})]}),!!(null==g?void 0:g.description)&&(0,a.jsx)("div",{className:"mt-4 max-h-56 overflow-y-auto",children:(0,a.jsx)("p",{className:"text-sm leading-relaxed text-neutral-800 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==g?void 0:g.description})}),((null==g?void 0:g.ctaLabel)||(null==g?void 0:g.ctaHref))&&(0,a.jsx)("div",{className:"mt-6 flex justify-center",children:(null==g?void 0:g.ctaHref)?(0,a.jsx)("a",{href:null==g?void 0:g.ctaHref,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(l=null==g?void 0:g.ctaLabel)?l:"Learn more"}):(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(s=null==g?void 0:g.ctaLabel)?s:"Learn more"})}),c.length>1&&(0,a.jsx)("div",{className:"mt-4 flex items-center justify-center gap-2",children:c.map((e,t)=>(0,a.jsx)("button",{"aria-label":"Go to slide ".concat(t+1),onClick:()=>m(t),className:"h-2 w-2 rounded-full ".concat(t===h?"bg-neutral-900":"bg-neutral-300")},t))})]})]})]})}},6414:(e,t,l)=>{"use strict";l.d(t,{N:()=>a});let a=(0,l(3254).createBrowserClient)("https://enadqzzfyywsbictfwvg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs")},7217:(e,t,l)=>{"use strict";l.d(t,{EY:()=>i,Hz:()=>r,IH:()=>c,QP:()=>o,Rs:()=>h,ox:()=>s,tX:()=>d,y$:()=>n,zM:()=>m});var a=l(5155);l(2115);let r=e=>{let{imageUrl:t,onFileSelect:l,onDrop:r,onDragOver:n,onPickClick:s,inputRef:i}=e;return(0,a.jsxs)("div",{className:"border border-dashed rounded-xl h-32 flex items-center justify-center relative hover:border-white/60 transition-colors cursor-pointer group",onClick:s,onDrop:r,onDragOver:n,title:"Click, drag & drop, or paste an image",children:[t?(0,a.jsx)("img",{src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):(0,a.jsxs)("div",{className:"text-center text-white/70 px-4",children:[(0,a.jsx)("div",{className:"text-sm",children:"Image Upload"}),(0,a.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Click, drag & drop, or paste"})]}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-xl ring-0 group-hover:ring-2 ring-white/10 pointer-events-none"}),(0,a.jsx)("input",{ref:i,type:"file",accept:"image/*",onChange:l,className:"hidden"})]})};async function n(e){let{setEvents:t,setLoadingEvents:l}=e;l(!0);try{let e=await fetch("/api/events",{cache:"no-store"}),l=await e.json();if(!e.ok)throw Error((null==l?void 0:l.error)||"Failed to load events");let a=(l.items||[]).sort((e,t)=>{var l,a;return(null!=(l=e.order)?l:0)-(null!=(a=t.order)?a:0)});console.log(a,"fetched items for homepage"),t(a)}catch(e){console.error(e)}finally{l(!1)}}function s(e){let{label:t,value:l,onChange:r,placeholder:n}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,a.jsx)("input",{value:l,onChange:e=>r(e.target.value),placeholder:n,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function i(e){let{label:t,value:l,onChange:r,placeholder:n,rows:s=5}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,a.jsx)("textarea",{value:l,onChange:e=>r(e.target.value),placeholder:n,rows:s,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 resize-y"})]})}function o(e){let{label:t,value:l,onChange:r,min:n,max:s}=e;return(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,a.jsx)("input",{style:{colorScheme:"dark"},type:"date",value:l,min:n,max:s,onChange:e=>r(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function c(e){let{publishModal:t,forceOpen:l,startDate:a,endDate:r}=e;if(!t)return!1;if(l)return!0;let n=new Date,s=a?function(e){let t=new Date(e);return t.setHours(0,0,0,0),t}(new Date(a)):new Date(0),i=r?function(e){let t=new Date(e);return t.setHours(23,59,59,999),t}(new Date(r)):new Date(864e13);return n>=s&&n<=i}function d(e,t){if(!e&&!t)return"";if(e&&!t)return u(e);if(!e&&t)return u(t);let l=new Date(e),a=new Date(t);if(isNaN(l.getTime())||isNaN(a.getTime()))return"";if(l.getFullYear()===a.getFullYear()&&l.getMonth()===a.getMonth()){let e=l.toLocaleString(void 0,{month:"short"});return"".concat(e," ").concat(l.getDate(),"–").concat(a.getDate(),", ").concat(l.getFullYear())}return"".concat(u(e)," – ").concat(u(t))}function u(e){let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function h(e){if(!e)return"";let[t,l]=e.split(":").map(Number),a=new Date;return a.setHours(null!=t?t:0,null!=l?l:0,0,0),a.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function m(e){return new Promise((t,l)=>{let a=new FileReader;a.onload=()=>t(String(a.result)),a.onerror=l,a.readAsDataURL(e)})}}},e=>{e.O(0,[309,254,766,834,516,441,964,358],()=>e(e.s=1342)),_N_E=e.O()}]);