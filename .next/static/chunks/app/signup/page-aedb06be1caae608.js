(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{5192:(e,t,a)=>{Promise.resolve().then(a.bind(a,9349))},6579:(e,t,a)=>{"use strict";a.d(t,{j2:()=>d});var s=a(3915),r=a(5404),l=a(5317),n=a(7505);let i=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyB_11tcDfTf6K9mD70lTFG6EHTPuTdgoN0",authDomain:"grandhyatt-71946.firebaseapp.com",projectId:"grandhyatt-71946",storageBucket:"grandhyatt-71946.firebasestorage.app",messagingSenderId:"327834275928",appId:"1:327834275928:web:e2ec1b59882fed5ff47a2d",measurementId:"G-J1H03Y1NBX"}),d=(0,r.xI)(i),o=(0,l.aU)(i),c=(0,n.c7)(i);(0,r.Wq)(d,"http://127.0.0.1:9099",{disableWarnings:!0}),(0,l.vN)(o,"127.0.0.1",8080),(0,n.nb)(c,"127.0.0.1",9199)},9349:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),l=a(5695),n=a(5404),i=a(6579);function d(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null);async function x(a){a.preventDefault(),b(null),m(!0);try{let a=await fetch("../api/bootstrap/create-first-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:c,displayName:d})}),s=await a.json();if(!a.ok)throw Error((null==s?void 0:s.error)||"Failed");await (0,n.p)(i.j2,s.customToken);let r=await i.j2.currentUser.getIdToken();if(!(await fetch("/api/auth/sessionLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:r})})).ok)throw Error("Failed to set session");e.replace("/admin")}catch(e){b(e.message)}finally{m(!1)}}return(0,s.jsx)("div",{className:"min-h-screen bg-[#151c2f] text-white flex items-center justify-center p-6",children:(0,s.jsxs)("form",{onSubmit:x,className:"w-full max-w-md space-y-4 rounded-xl bg-[#212e3f] p-6 shadow-xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Create the first admin user"}),(0,s.jsxs)("p",{className:"text-white/60 text-sm",children:["This page only appears because no users exist yet. The created account will be an ",(0,s.jsx)("b",{children:"admin"}),"."]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Display name"}),(0,s.jsx)("input",{className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:d,onChange:e=>o(e.target.value),required:!0})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:t,onChange:e=>a(e.target.value),required:!0})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:c,onChange:e=>u(e.target.value),minLength:6,required:!0})]}),p&&(0,s.jsx)("div",{className:"text-red-300 text-sm",children:p}),(0,s.jsx)("button",{disabled:h,className:"w-full rounded-lg bg-emerald-500/90 hover:bg-emerald-500 text-black font-medium px-3 py-2 disabled:opacity-60",children:h?"Creatingâ€¦":"Create admin"})]})})}}},e=>{e.O(0,[135,965,270,441,964,358],()=>e(e.s=5192)),_N_E=e.O()}]);