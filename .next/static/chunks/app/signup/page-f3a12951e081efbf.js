(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{4693:(e,t,s)=>{Promise.resolve().then(s.bind(s,9349))},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6414:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(3254).createBrowserClient)("https://enadqzzfyywsbictfwvg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs")},9349:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),r=s(2115),n=s(5695),i=s(6414);function l(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),[h,b]=(0,r.useState)(null);async function p(s){s.preventDefault(),b(null),m(!0);try{let s=await fetch("/api/bootstrap/create-first-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o,name:l})}),a=await s.json();if(!s.ok)throw Error((null==a?void 0:a.error)||"Failed to create admin");let{error:r}=await i.N.auth.signInWithPassword({email:t,password:o});if(r)throw r;e.replace("/admin")}catch(e){b((null==e?void 0:e.message)||"Something went wrong")}finally{m(!1)}}return(0,r.useEffect)(()=>{i.N.auth.getSession().then(t=>{let{data:s}=t;s.session&&e.replace("/admin")})},[e]),(0,a.jsx)("div",{className:"min-h-screen bg-[#151c2f] text-white flex items-center justify-center p-6",children:(0,a.jsxs)("form",{onSubmit:p,className:"w-full max-w-md space-y-4 rounded-xl bg-[#212e3f] p-6 shadow-xl",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Create the first admin user"}),(0,a.jsxs)("p",{className:"text-white/60 text-sm",children:["This page only appears because no users exist yet. The created account will be an ",(0,a.jsx)("b",{children:"admin"}),"."]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Display name"}),(0,a.jsx)("input",{className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:l,onChange:e=>u(e.target.value),required:!0})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Email"}),(0,a.jsx)("input",{type:"email",className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:t,onChange:e=>s(e.target.value),required:!0})]}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("div",{className:"mb-1 text-sm text-white/80",children:"Password"}),(0,a.jsx)("input",{type:"password",className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30",value:o,onChange:e=>d(e.target.value),minLength:6,required:!0})]}),h&&(0,a.jsx)("div",{className:"text-red-300 text-sm",children:h}),(0,a.jsx)("button",{disabled:c,className:"w-full rounded-lg bg-emerald-500/90 hover:bg-emerald-500 text-black font-medium px-3 py-2 disabled:opacity-60",children:c?"Creatingâ€¦":"Create admin"})]})})}}},e=>{e.O(0,[254,441,964,358],()=>e(e.s=4693)),_N_E=e.O()}]);