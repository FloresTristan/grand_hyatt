"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{528:(e,t,n)=>{n.d(t,{B:()=>s});var r=n(5155);n(2115);var l=n(6766),a=n(8882),o=n(5808),i=n(7149);function s(e){let{open:t,src:n,alt:s="",onClose:c,imageRef:u}=e;return(0,r.jsx)(a.A,{open:t,onClose:c,maxWidth:!1,PaperProps:{sx:{bgcolor:"transparent",boxShadow:"none",borderRadius:2}},children:(0,r.jsx)(o.A,{sx:{p:0,position:"relative",width:{xs:"95vw",sm:"90vw"},height:{xs:"80vh",sm:"85vh"},overflow:"hidden",bgcolor:"transparent"},children:(0,r.jsx)(i.A,{sx:{position:"relative",width:"100%",height:"100%"},children:(0,r.jsx)(l.default,{ref:u,src:n,alt:s,fill:!0,sizes:"100vw",priority:!0,className:"object-contain object-center"})})})})}},6217:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(5155),l=n(2115),a=n(6766),o=n(6643),i=n(335),s=n(528);function c(e){var t,n,c;let{open:u,onClose:d,events:h,container:m="contained",initialIndex:x=0}=e,[f,v]=(0,l.useState)(()=>{var e;return Math.min(Math.max(x,0),Math.max(0,(null!=(e=null==h?void 0:h.length)?e:1)-1))}),[p,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;v(Math.min(Math.max(x,0),Math.max(0,(null!=(e=null==h?void 0:h.length)?e:1)-1)))},[h,x,u]),console.log({index:f});let w=(0,l.useRef)([]),b=(0,l.useRef)(null);(0,l.useEffect)(()=>{let e=w.current[f];e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[f]),(0,l.useEffect)(()=>{function e(e){e.target===b.current&&g(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,l.useEffect)(()=>{var e;if(u&&!((null!=(e=null==h?void 0:h.length)?e:0)<1))return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t);function t(e){"Escape"===e.key&&d(),"ArrowLeft"===e.key&&v(e=>(e-1+h.length)%h.length),"ArrowRight"===e.key&&v(e=>(e+1)%h.length)}},[u,h,d]);let j=(null!=(t=null==h?void 0:h.length)?t:0)>0;if(!u||!j)return null;let N="contained"===m?"absolute":"fixed",y=h[f];return console.log({current:y}),(0,r.jsxs)("div",{className:"".concat(N," inset-0 ").concat("contained"===m?"z-10":"z-[50]"," flex items-center justify-center"),role:"dialog","aria-modal":"true",children:[(0,r.jsx)("div",{className:"".concat(N," inset-0 bg-black/60 backdrop-blur-[1px]"),onClick:d}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-[290px] md:max-w-[560px] rounded-2xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:d,"aria-label":"Close",className:"absolute -right-3 -top-3 flex h-10 w-10 items-center justify-center rounded-full bg-red-500 hover:bg-red-600 text-white shadow-lg cursor-pointer ring-4 ring-white",children:"\xd7"}),h.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"aria-label":"Previous",onClick:()=>v(e=>(e-1+h.length)%h.length),className:"absolute left-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"‹"}),(0,r.jsx)("button",{"aria-label":"Next",onClick:()=>v(e=>(e+1)%h.length),className:"absolute right-2 top-1/2 z-[50] -translate-y-1/2 rounded-full bg-black/30 text-white h-8 w-8 grid place-items-center hover:bg-black/40",children:"›"})]}),(0,r.jsxs)("div",{className:"px-5 pb-5 pt-6",children:[(null==y?void 0:y.imageUrl)&&(0,r.jsxs)("div",{className:"relative mx-auto mb-4 h-32 w-full overflow-hidden rounded-xl  ".concat("fullscreen"===m?"md:h-60":"md:h-32"),children:[(0,r.jsx)(a.default,{src:y.imageUrl,alt:y.title||"",fill:!0,unoptimized:!0,className:"object-contain object-center bg-black/50 cursor-zoom-in   hover:scale-[1.02] transition-transform duration-300 hover:opacity-70 hover:duration-500",sizes:"(max-width: 640px) 100vw, 560px",priority:!0,onClick:()=>g(!0)}),(0,r.jsx)(s.B,{open:p,src:y.imageUrl||"",alt:y.title||"",imageRef:b,onClose:()=>g(!1)})]}),(0,r.jsx)("h2",{className:"text-center text-neutral-600 text-3xl font-semibold tracking-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==y?void 0:y.title}),!!(null==y?void 0:y.subheading)&&(0,r.jsx)("p",{className:"mt-1 text-center text-sm text-neutral-600 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==y?void 0:y.subheading}),((null==y?void 0:y.dateRange)||(null==y?void 0:y.timeText))&&(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm text-neutral-700",children:[(null==y?void 0:y.dateRange)&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,r.jsx)(o.A,{sx:{fontSize:20}}),null==y?void 0:y.dateRange]}),(null==y?void 0:y.timeText)&&(0,r.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,r.jsx)(i.A,{sx:{fontSize:20}}),null==y?void 0:y.timeText]})]}),!!(null==y?void 0:y.description)&&(0,r.jsx)("div",{className:"mt-4 max-h-56 overflow-y-auto",children:(0,r.jsx)("p",{className:"text-sm leading-relaxed text-neutral-800 whitespace-pre-wrap break-words [overflow-wrap:anywhere] hyphens-auto",children:null==y?void 0:y.description})}),((null==y?void 0:y.ctaLabel)||(null==y?void 0:y.ctaHref))&&(0,r.jsx)("div",{className:"mt-6 flex justify-center",children:(null==y?void 0:y.ctaHref)?(0,r.jsx)("a",{href:null==y?void 0:y.ctaHref,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(n=null==y?void 0:y.ctaLabel)?n:"Learn more"}):(0,r.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-red-600 hover:bg-red-500 hover:shadow-2xl duration-300 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow hover:opacity-95",children:null!=(c=null==y?void 0:y.ctaLabel)?c:"Learn more"})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{className:"items-center w-[25%] md:w-[15%]",children:h.length>1&&(0,r.jsx)("div",{className:"mt-4 w-full max-w-md mx-auto  overflow-x-scroll custom-scrollbar",children:(0,r.jsx)("div",{className:"flex items-center gap-3 px-2",children:h.map((e,t)=>{let n=t===f;return(0,r.jsx)("button",{ref:e=>{w.current[t]=e},"aria-label":"Go to slide ".concat(t+1),"aria-current":n?"true":void 0,onClick:()=>v(t),className:"\n                            h-2 md:h-3 w-2 md:w-3 rounded-full transition-all duration-300\n                            flex-shrink-0 focus:outline-none\n                            ".concat(n?"bg-neutral-900":"border-neutral-300 bg-neutral-200 hover:bg-neutral-400","\n                          ")},t)})})})})})]})]})]})}},7217:(e,t,n)=>{n.d(t,{$h:()=>m,Ah:()=>o,E2:()=>a,EY:()=>u,Hz:()=>l,IH:()=>x,Nb:()=>i,QP:()=>d,Rs:()=>p,dT:()=>g,lP:()=>s,oS:()=>w,ox:()=>c,sH:()=>v,tX:()=>f,zM:()=>j});var r=n(5155);n(2115);let l=e=>{let{imageUrl:t,onFileSelect:n,onDrop:l,onDragOver:a,onPickClick:o,inputRef:i}=e;return(0,r.jsxs)("div",{className:"border border-dashed rounded-xl h-32 flex items-center justify-center relative hover:border-white/60 transition-colors cursor-pointer group",onClick:o,onDrop:l,onDragOver:a,title:"Click, drag & drop, or paste an image",children:[t?(0,r.jsx)("img",{src:t,alt:"Preview",className:"absolute inset-0 w-full h-full object-cover rounded-xl"}):(0,r.jsxs)("div",{className:"text-center text-white/70 px-4",children:[(0,r.jsx)("div",{className:"text-sm",children:"Image Upload"}),(0,r.jsx)("div",{className:"text-xs mt-1 opacity-80",children:"Click, drag & drop, or paste"})]}),(0,r.jsx)("div",{className:"absolute inset-0 rounded-xl ring-0 group-hover:ring-2 ring-white/10 pointer-events-none"}),(0,r.jsx)("input",{ref:i,type:"file",accept:"image/*",onChange:n,className:"hidden"})]})};async function a(e){let{setEvents:t,setLoadingEvents:n}=e;n(!0);try{var r,l;let e=await fetch("/api/events",{cache:"no-store"}),n=await e.json();if(console.log(n,"fetched data for homepage"),console.log("ANON key fingerprint:",(r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===r)?void 0:r.slice(0,6),"…",(l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVuYWRxenpmeXl3c2JpY3Rmd3ZnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxODQ1OTIsImV4cCI6MjA3MTc2MDU5Mn0.VPk2P-BIeJs01QDgUwYtn-K66onMC70WpZeYdHZbEXs",void 0===l)?void 0:l.slice(-6)),!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load events");let a=(n.items||[]).sort((e,t)=>{var n,r;return(null!=(n=e.order)?n:0)-(null!=(r=t.order)?r:0)});t(a)}catch(e){console.error(e)}finally{n(!1)}}async function o(e){let{setEvents:t,setLoadingEvents:n}=e;n(!0);try{let e=await fetch("/api/admin/events",{cache:"no-store"}),n=await e.json();if(!e.ok)throw Error((null==n?void 0:n.error)||"Failed to load events");let r=(n.items||[]).sort((e,t)=>{var n,r;return(null!=(n=e.order)?n:0)-(null!=(r=t.order)?r:0)});t(r)}catch(e){console.error(e)}finally{n(!1)}}async function i(e){let{setSeasons:t,setLoading:n}=e;try{null==n||n(!0);let e=await fetch("/api/seasons",{cache:"no-store"}),r=await e.json();if(!e.ok)throw Error((null==r?void 0:r.error)||"Failed to load seasons");let l=Array.isArray(null==r?void 0:r.items)?r.items:[];return t(l),l}catch(e){return console.error(e),t([]),[]}finally{null==n||n(!1)}}async function s(e){let{setHotspots:t,setLoading:n}=e;try{null==n||n(!0);let e=await fetch("/api/hotspots",{cache:"no-store"}),r=await e.json();if(!e.ok)throw Error((null==r?void 0:r.error)||"Failed to load seasons");let l=Array.isArray(null==r?void 0:r.items)?r.items:[];return t(l),l}catch(e){return console.error(e),t([]),[]}finally{null==n||n(!1)}}function c(e){let{label:t,value:n,onChange:l,placeholder:a}=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,r.jsx)("input",{value:n,onChange:e=>l(e.target.value),placeholder:a,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}function u(e){let{label:t,value:n,onChange:l,placeholder:a,rows:o=5}=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,r.jsx)("textarea",{value:n,maxLength:500,onChange:e=>l(e.target.value),placeholder:a,rows:o,className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30 resize-y"})]})}function d(e){let{label:t,value:n,onChange:l,min:a,max:o}=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("div",{className:"text-sm mb-1 text-white/80",children:t}),(0,r.jsx)("input",{style:{colorScheme:"dark"},type:"date",value:n,min:a,max:o,onChange:e=>l(e.target.value),className:"w-full rounded-lg bg-[#131a2a] border border-white/10 px-3 py-2 outline-none focus:border-white/30"})]})}let h=["all","live","scheduled","expired","hidden"],m=(e,t,n)=>{if(0===t)return n(!1),null!=e?e:[];{var r;console.log({tabIdx:t}),n(!0);let l=null!=(r=h[t])?r:"live";return console.log({wanted:l}),(null!=e?e:[]).filter(e=>(e=>{if(null==e?void 0:e.computed_status)return e.computed_status;if(!(null==e?void 0:e.published))return"hidden";let t=Date.now(),n=(null==e?void 0:e.publish_at)?new Date(e.publish_at).getTime():null,r=(null==e?void 0:e.unpublish_at)?new Date(e.unpublish_at).getTime():null;return n&&n>t?"scheduled":r&&r<=t?"expired":"live"})(e)===l)}};function x(e){let{publishModal:t,forceOpen:n,startDate:r,endDate:l}=e;if(!t)return!1;if(n)return!0;let a=new Date,o=r?function(e){let t=new Date(e);return t.setHours(0,0,0,0),t}(new Date(r)):new Date(0),i=l?function(e){let t=new Date(e);return t.setHours(23,59,59,999),t}(new Date(l)):new Date(864e13);return a>=o&&a<=i}function f(e,t){if(!e&&!t)return"";if(e&&!t)return b(e);if(!e&&t)return b(t);let n=new Date(e),r=new Date(t);if(isNaN(n.getTime())||isNaN(r.getTime()))return"";if(n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()){let e=n.toLocaleString(void 0,{month:"short"});return"".concat(e," ").concat(n.getDate(),"–").concat(r.getDate(),", ").concat(n.getFullYear())}return"".concat(b(e)," – ").concat(b(t))}function v(e,t){let n=p(e),r=p(t);return n||r?n&&!r?n:!n&&r?r:"".concat(n," – ").concat(r):""}function p(e,t){var n;let r=function(e){var t,n;if(!(null==e?void 0:e.trim()))return null;let r=/^(\d{1,2})(?::(\d{1,2}))?(?::(\d{1,2})(?:\.\d+)?)?$/.exec(e.trim());if(!r)return null;let l=Number(r[1]),a=Number(null!=(t=r[2])?t:"0"),o=Number(null!=(n=r[3])?n:"0");return Number.isNaN(l)||Number.isNaN(a)||Number.isNaN(o)||l<0||l>23||a<0||a>59||o<0||o>59?null:{h:l,m:a}}(e);if(!r)return"";let l=r.h%12;0===l&&(l=12);let a=r.h<12?"am":"pm",o=(null==t?void 0:t.upper)?a.toUpperCase():a;return"".concat(l,":").concat((n=r.m)<10?"0".concat(n):String(n)," ").concat(o)}function g(e){return e?new Date(e).toISOString():null}let w=e=>{if(!e)return"";let t=new Date(e),n=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()),"T").concat(n(t.getHours()),":").concat(n(t.getMinutes()))};function b(e){let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function j(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(String(r.result)),r.onerror=n,r.readAsDataURL(e)})}}}]);