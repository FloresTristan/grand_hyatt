{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/api/admin/users/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nexport const runtime = 'nodejs';\r\n\r\nfunction adminClient() {\r\n  return createClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY! // server-only!\r\n  );\r\n}\r\n\r\nexport async function GET() {\r\n  try {\r\n    const supa = adminClient();\r\n    const { data, error } = await supa.auth.admin.listUsers();\r\n    if (error) throw error;\r\n\r\n    // map to your table shape\r\n    const items = data.users.map(u => ({\r\n      uid: u.id,\r\n      email: u.email!,\r\n      displayName: (u.user_metadata as unknown)?.display_name || '',\r\n      role: (u.app_metadata as unknown)?.role || 'user',\r\n      disabled: u.banned_until ? true : false,\r\n      createdAt: u.created_at ? new Date(u.created_at).getTime() : undefined,\r\n      lastLoginAt: u.last_sign_in_at ? new Date(u.last_sign_in_at).getTime() : undefined,\r\n    }));\r\n\r\n    return NextResponse.json({ items });\r\n  } catch (e: unknown) {\r\n    return NextResponse.json({ error: e.message || 'Server error' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEvB,SAAS;IACP,OAAO,CAAA,GAAA,yLAAA,CAAA,eAAY,AAAD,gFAEhB,QAAQ,GAAG,CAAC,yBAAyB;AAEzC;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO;QACb,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS;QACvD,IAAI,OAAO,MAAM;QAEjB,0BAA0B;QAC1B,MAAM,QAAQ,KAAK,KAAK,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;gBACjC,KAAK,EAAE,EAAE;gBACT,OAAO,EAAE,KAAK;gBACd,aAAa,AAAC,EAAE,aAAa,EAAc,gBAAgB;gBAC3D,MAAM,AAAC,EAAE,YAAY,EAAc,QAAQ;gBAC3C,UAAU,EAAE,YAAY,GAAG,OAAO;gBAClC,WAAW,EAAE,UAAU,GAAG,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK;gBAC7D,aAAa,EAAE,eAAe,GAAG,IAAI,KAAK,EAAE,eAAe,EAAE,OAAO,KAAK;YAC3E,CAAC;QAED,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE;QAAM;IACnC,EAAE,OAAO,GAAY;QACnB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO,EAAE,OAAO,IAAI;QAAe,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF","debugId":null}}]
}