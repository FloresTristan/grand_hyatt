{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/lib/supabase/server.ts"],"sourcesContent":["\r\nimport { cookies } from 'next/headers';\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr';\r\n\r\nexport async function createSupabaseServer() {\r\n  const cookieStore = await cookies();\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return cookieStore.get(name)?.value;\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value, ...options });\r\n          } catch {\r\n            // no-op in RSC (only works in route handlers/actions)\r\n          }\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value: '', ...options });\r\n          } catch {\r\n            // no-op in RSC\r\n          }\r\n        },\r\n      },\r\n    }\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;AACA;AACA;AAAA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAEhC,OAAO,CAAA,GAAA,2KAAA,CAAA,qBAAkB,AAAD,sUAGtB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAM;gBACN,sDAAsD;gBACxD;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAM;gBACN,eAAe;gBACjB;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/api/events/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { createSupabaseServer } from '../../../../../lib/supabase/server';\r\n\r\nexport const runtime = 'nodejs';\r\ntype Ctx = { params: Promise<{ id: string }> };\r\n\r\nexport async function GET(_req: Request, ctx: Ctx) {\r\n  const { id } = await ctx.params;\r\n  const supabase = await createSupabaseServer();\r\n  const { data, error } = await supabase.from('events').select('*').eq('id', id).single();\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 404 });\r\n  return NextResponse.json({ item: data });\r\n}\r\n\r\nexport async function PATCH(req: Request, ctx: Ctx) {\r\n  const { id } = await ctx.params;\r\n  const supabase = await createSupabaseServer();\r\n  const body = await req.json();\r\n\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n  if (!user) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n\r\n  const update: unknown = {\r\n    title: body.title,\r\n    subheading: body.subheading,\r\n    description: body.description,\r\n    start_date: body.startDate,\r\n    end_date: body.endDate,\r\n    start_time: body.startTime,\r\n    cta_label: body.ctaLabel,\r\n    cta_href: body.ctaHref,\r\n    image_url: body.image_url,\r\n    image_path: body.image_path,\r\n    status: body.status,\r\n    order: typeof body.order === 'number' ? body.order : undefined,\r\n    updated_at: new Date().toISOString(),\r\n    updated_by: user.id,\r\n  };\r\n\r\n  Object.keys(update).forEach(k => update[k] === undefined && delete update[k]);\r\n\r\n  const { error } = await supabase.from('events').update(update).eq('id', id);\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n  return NextResponse.json({ ok: true, id });\r\n}\r\n\r\nexport async function DELETE(\r\n  _req: Request,\r\n  ctx: { params: Promise<Params> } \r\n) {\r\n  const { id } = await ctx.params; \r\n  const supabase = await createSupabaseServer();\r\n\r\n  const { data: ev } = await supabase\r\n    .from('events')\r\n    .select('image_path')\r\n    .eq('id', id)\r\n    .single();\r\n\r\n  const { error } = await supabase.from('events').delete().eq('id', id);\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n\r\n  if (ev?.image_path) {\r\n    await supabase.storage.from('events').remove([ev.image_path]).catch(() => {});\r\n  }\r\n\r\n  return NextResponse.json({ ok: true });\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}