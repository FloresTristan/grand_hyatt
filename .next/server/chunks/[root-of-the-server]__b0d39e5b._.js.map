{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/lib/supabase/server.ts"],"sourcesContent":["\r\nimport { cookies } from 'next/headers';\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr';\r\n\r\nexport async function createSupabaseServer() {\r\n  const cookieStore = await cookies();\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return cookieStore.get(name)?.value;\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value, ...options });\r\n          } catch {\r\n            // no-op in RSC (only works in route handlers/actions)\r\n          }\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          try {\r\n            cookieStore.set({ name, value: '', ...options });\r\n          } catch {\r\n            // no-op in RSC\r\n          }\r\n        },\r\n      },\r\n    }\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;AACA;AACA;AAAA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAEhC,OAAO,CAAA,GAAA,2KAAA,CAAA,qBAAkB,AAAD,sUAGtB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM;wBAAO,GAAG,OAAO;oBAAC;gBAC5C,EAAE,OAAM;gBACN,sDAAsD;gBACxD;YACF;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,IAAI;oBACF,YAAY,GAAG,CAAC;wBAAE;wBAAM,OAAO;wBAAI,GAAG,OAAO;oBAAC;gBAChD,EAAE,OAAM;gBACN,eAAe;gBACjB;YACF;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mata/Documents/GitHub/grand_hyatt/src/app/api/admin/events/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { createSupabaseServer } from '../../../../../lib/supabase/server';\r\n\r\nexport const runtime = 'nodejs';\r\nexport const dynamic = 'force-dynamic';\r\nexport const revalidate = 0;\r\n\r\nexport async function GET() {\r\n  const supabase = await createSupabaseServer();\r\n\r\n  const { data, error } = await supabase\r\n    .from('events_with_status')\r\n    .select('*')\r\n    .order('order', { ascending: true })\r\n    .order('publish_at', { ascending: false, nullsFirst: true });\r\n\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n  return NextResponse.json({ items: data });\r\n}\r\n\r\n\r\n// export async function POST(req: Request) {\r\n//   const supabase = await createSupabaseServer();\r\n//   const body = await req.json();\r\n//   const { data: { user } } = await supabase.auth.getUser();\r\n//   if (!user) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n\r\n//   const payload = {\r\n//     title: body.title, subheading: body.subheading, description: body.description,\r\n//     start_date: body.startDate || null,\r\n//     end_date: body.endDate || null,\r\n//     start_time: body.startTime || null,\r\n//     end_time: body.endTime || null,\r\n//     cta_label: body.ctaLabel,\r\n//     cta_href: body.ctaHref,\r\n//     image_url: body.image_url || null,\r\n//     image_path: body.image_path || null,\r\n//     status: body.status || 'draft',\r\n//     order: body.order ?? 0,\r\n//     updated_by: user.id\r\n//   };\r\n\r\n//   const { data, error } = await supabase.from('events').insert(payload).select().single();\r\n//   if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n//   return NextResponse.json({ item: data });\r\n// }\r\n\r\nexport async function POST(req: Request) {\r\n  const supabase = await createSupabaseServer();\r\n  const body = await req.json();\r\n\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n  if (!user) return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n\r\n  const payload = {\r\n    title: body.title ?? null,\r\n    subheading: body.subheading ?? null,\r\n    description: body.description ?? null,\r\n    start_date: body.startDate ?? null,\r\n    end_date: body.endDate ?? null,\r\n    start_time: body.startTime ?? null,\r\n    end_time: body.endTime ?? null,\r\n    cta_label: body.ctaLabel ?? null,\r\n    cta_href: body.ctaHref ?? null,\r\n    image_url: body.image_url ?? null,\r\n    published: Boolean(body.published ?? false),\r\n    publish_at: body.publishAt ?? null,\r\n    unpublish_at: body.unpublishAt ?? null,\r\n    order: body.order ?? 0,\r\n    updated_by: user.id,\r\n  };\r\n\r\n  const { data, error } = await supabase\r\n    .from('events')\r\n    .insert(payload)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) return NextResponse.json({ error: error.message }, { status: 500 });\r\n  return NextResponse.json({ item: data });\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAChB,MAAM,UAAU;AAChB,MAAM,aAAa;AAEnB,eAAe;IACpB,MAAM,WAAW,MAAM,CAAA,GAAA,2HAAA,CAAA,uBAAoB,AAAD;IAE1C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,sBACL,MAAM,CAAC,KACP,KAAK,CAAC,SAAS;QAAE,WAAW;IAAK,GACjC,KAAK,CAAC,cAAc;QAAE,WAAW;QAAO,YAAY;IAAK;IAE5D,IAAI,OAAO,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO,MAAM,OAAO;IAAC,GAAG;QAAE,QAAQ;IAAI;IAC5E,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAK;AACzC;AA6BO,eAAe,KAAK,GAAY;IACrC,MAAM,WAAW,MAAM,CAAA,GAAA,2HAAA,CAAA,uBAAoB,AAAD;IAC1C,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,IAAI,CAAC,MAAM,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO;IAAe,GAAG;QAAE,QAAQ;IAAI;IAE7E,MAAM,UAAU;QACd,OAAO,KAAK,KAAK,IAAI;QACrB,YAAY,KAAK,UAAU,IAAI;QAC/B,aAAa,KAAK,WAAW,IAAI;QACjC,YAAY,KAAK,SAAS,IAAI;QAC9B,UAAU,KAAK,OAAO,IAAI;QAC1B,YAAY,KAAK,SAAS,IAAI;QAC9B,UAAU,KAAK,OAAO,IAAI;QAC1B,WAAW,KAAK,QAAQ,IAAI;QAC5B,UAAU,KAAK,OAAO,IAAI;QAC1B,WAAW,KAAK,SAAS,IAAI;QAC7B,WAAW,QAAQ,KAAK,SAAS,IAAI;QACrC,YAAY,KAAK,SAAS,IAAI;QAC9B,cAAc,KAAK,WAAW,IAAI;QAClC,OAAO,KAAK,KAAK,IAAI;QACrB,YAAY,KAAK,EAAE;IACrB;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,UACL,MAAM,CAAC,SACP,MAAM,GACN,MAAM;IAET,IAAI,OAAO,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,OAAO,MAAM,OAAO;IAAC,GAAG;QAAE,QAAQ;IAAI;IAC5E,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,MAAM;IAAK;AACxC","debugId":null}}]
}